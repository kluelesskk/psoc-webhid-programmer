var Module=typeof Module!=="undefined"?Module:{};var moduleOverrides={};var key;for(key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}var arguments_=[];var thisProgram="./this.program";var quit_=function(status,toThrow){throw toThrow};var ENVIRONMENT_IS_WEB=false;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_IS_SHELL=false;ENVIRONMENT_IS_WEB=typeof window==="object";ENVIRONMENT_IS_WORKER=typeof importScripts==="function";ENVIRONMENT_IS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;var nodeFS;var nodePath;if(ENVIRONMENT_IS_NODE){if(ENVIRONMENT_IS_WORKER){scriptDirectory=require("path").dirname(scriptDirectory)+"/"}else{scriptDirectory=__dirname+"/"}read_=function shell_read(filename,binary){var ret=tryParseAsDataURI(filename);if(ret){return binary?ret:ret.toString()}if(!nodeFS)nodeFS=require("fs");if(!nodePath)nodePath=require("path");filename=nodePath["normalize"](filename);return nodeFS["readFileSync"](filename,binary?null:"utf8")};readBinary=function readBinary(filename){var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}assert(ret.buffer);return ret};if(process["argv"].length>1){thisProgram=process["argv"][1].replace(/\\/g,"/")}arguments_=process["argv"].slice(2);if(typeof module!=="undefined"){module["exports"]=Module}process["on"]("uncaughtException",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process["on"]("unhandledRejection",abort);quit_=function(status){process["exit"](status)};Module["inspect"]=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL){if(typeof read!="undefined"){read_=function shell_read(f){var data=tryParseAsDataURI(f);if(data){return intArrayToString(data)}return read(f)}}readBinary=function readBinary(f){var data;data=tryParseAsDataURI(f);if(data){return data}if(typeof readbuffer==="function"){return new Uint8Array(readbuffer(f))}data=read(f,"binary");assert(typeof data==="object");return data};if(typeof scriptArgs!="undefined"){arguments_=scriptArgs}else if(typeof arguments!="undefined"){arguments_=arguments}if(typeof quit==="function"){quit_=function(status){quit(status)}}if(typeof print!=="undefined"){if(typeof console==="undefined")console={};console.log=print;console.warn=console.error=typeof printErr!=="undefined"?printErr:print}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=="undefined"&&document.currentScript){scriptDirectory=document.currentScript.src}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1)}else{scriptDirectory=""}{read_=function(url){try{var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.send(null);return xhr.responseText}catch(err){var data=tryParseAsDataURI(url);if(data){return intArrayToString(data)}throw err}};if(ENVIRONMENT_IS_WORKER){readBinary=function(url){try{var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.responseType="arraybuffer";xhr.send(null);return new Uint8Array(xhr.response)}catch(err){var data=tryParseAsDataURI(url);if(data){return data}throw err}}}readAsync=function(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}var data=tryParseAsDataURI(url);if(data){onload(data.buffer);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=function(title){document.title=title}}else{}var out=Module["print"]||console.log.bind(console);var err=Module["printErr"]||console.warn.bind(console);for(key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}moduleOverrides=null;if(Module["arguments"])arguments_=Module["arguments"];if(Module["thisProgram"])thisProgram=Module["thisProgram"];if(Module["quit"])quit_=Module["quit"];var STACK_ALIGN=16;function alignMemory(size,factor){if(!factor)factor=STACK_ALIGN;return Math.ceil(size/factor)*factor}var wasmBinary;if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];var noExitRuntime=Module["noExitRuntime"]||true;var WebAssembly={Memory:function(opts){this.buffer=new ArrayBuffer(opts["initial"]*65536)},Module:function(binary){},Instance:function(module,info){this.exports=(
// EMSCRIPTEN_START_ASM
function instantiate(kb){function fb(lb){lb.set=(function(c,mb){this[c]=mb});lb.get=(function(c){return this[c]});return lb}var a;var b=new Uint8Array(123);for(var c=25;c>=0;--c){b[48+c]=52+c;b[65+c]=c;b[97+c]=26+c}b[43]=62;b[47]=63;function gb(nb,ob,pb){var d,e,c=0,f=ob,g=pb.length,h=ob+(g*3>>2)-(pb[g-2]=="=")-(pb[g-1]=="=");for(;c<g;c+=4){d=b[pb.charCodeAt(c+1)];e=b[pb.charCodeAt(c+2)];nb[f++]=b[pb.charCodeAt(c)]<<2|d>>4;if(f<h)nb[f++]=d<<4|e>>2;if(f<h)nb[f++]=e<<6|b[pb.charCodeAt(c+3)]}}function hb(qb){gb(a,1024,"cgByd2EAcndh");gb(a,1036,"AgAAAAMAAAAEAAAABQAAAEAAAADwC1A=")}function ib(rb){var i=rb.a;var j=i.buffer;var k=new Int8Array(j);var l=new Int16Array(j);var m=new Int32Array(j);var n=new Uint8Array(j);var o=new Uint16Array(j);var p=new Uint32Array(j);var q=new Float32Array(j);var r=new Float64Array(j);var s=Math.imul;var t=Math.fround;var u=Math.abs;var v=Math.clz32;var w=Math.min;var x=Math.max;var y=Math.floor;var z=Math.ceil;var A=Math.trunc;var B=Math.sqrt;var C=rb.abort;var D=NaN;var E=Infinity;var F=rb.b;var G=rb.c;var H=rb.d;var I=rb.e;var J=rb.f;var K=rb.g;var L=rb.h;var M=rb.i;var N=rb.j;var O=rb.k;var P=rb.l;var Q=rb.m;var R=rb.n;var S=rb.o;var T=5245936;var U=0;var V=0;
// EMSCRIPTEN_START_FUNCS
function ia(a){a=a|0;var b=0,c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,o=0;o=T-16|0;T=o;a:{b:{c:{d:{e:{f:{g:{h:{i:{j:{k:{l:{if(a>>>0<=244){e=m[640];f=a>>>0<11?16:a+11&-8;a=f>>>3|0;b=e>>>a|0;if(b&3){c=a+((b^-1)&1)|0;d=c<<3;b=m[d+2608>>2];a=b+8|0;f=m[b+8>>2];d=d+2600|0;m:{if((f|0)==(d|0)){m[640]=eb(c)&e;break m}m[f+12>>2]=d;m[d+8>>2]=f}c=c<<3;m[b+4>>2]=c|3;b=b+c|0;m[b+4>>2]=m[b+4>>2]|1;break a}i=m[642];if(i>>>0>=f>>>0){break l}if(b){c=2<<a;a=(c|0-c)&b<<a;b=(a&0-a)-1|0;a=b>>>12&16;c=b>>>a|0;b=c>>>5&8;d=c>>>b|0;c=d>>>2&4;h=d>>>c|0;d=h>>>1&2;g=h>>>d|0;h=g>>>1&1;c=(h|(d|(c|(a|b))))+(g>>>h|0)|0;d=c<<3;b=m[d+2608>>2];a=m[b+8>>2];d=d+2600|0;n:{if((a|0)==(d|0)){e=eb(c)&e;m[640]=e;break n}m[a+12>>2]=d;m[d+8>>2]=a}a=b+8|0;m[b+4>>2]=f|3;h=b+f|0;c=c<<3;d=c-f|0;m[h+4>>2]=d|1;m[b+c>>2]=d;if(i){c=i>>>3|0;b=(c<<3)+2600|0;f=m[645];c=1<<c;o:{if(!(c&e)){m[640]=c|e;c=b;break o}c=m[b+8>>2]}m[b+8>>2]=f;m[c+12>>2]=f;m[f+12>>2]=b;m[f+8>>2]=c}m[645]=h;m[642]=d;break a}k=m[641];if(!k){break l}b=(k&0-k)-1|0;a=b>>>12&16;c=b>>>a|0;b=c>>>5&8;d=c>>>b|0;c=d>>>2&4;h=d>>>c|0;d=h>>>1&2;g=h>>>d|0;h=g>>>1&1;b=m[((h|(d|(c|(a|b))))+(g>>>h|0)<<2)+2864>>2];h=(m[b+4>>2]&-8)-f|0;c=b;while(1){p:{a=m[c+16>>2];if(!a){a=m[c+20>>2];if(!a){break p}}d=(m[a+4>>2]&-8)-f|0;c=d>>>0<h>>>0;h=c?d:h;b=c?a:b;c=a;continue}break}l=b+f|0;if(l>>>0<=b>>>0){break k}j=m[b+24>>2];d=m[b+12>>2];if((d|0)!=(b|0)){a=m[b+8>>2];m[a+12>>2]=d;m[d+8>>2]=a;break b}c=b+20|0;a=m[c>>2];if(!a){a=m[b+16>>2];if(!a){break j}c=b+16|0}while(1){g=c;d=a;c=a+20|0;a=m[c>>2];if(a){continue}c=d+16|0;a=m[d+16>>2];if(a){continue}break}m[g>>2]=0;break b}f=-1;if(a>>>0>4294967231){break l}a=a+11|0;f=a&-8;i=m[641];if(!i){break l}e=31;h=0-f|0;if(f>>>0<=16777215){b=a>>>8|0;a=b+1048320>>>16&8;c=b<<a;b=c+520192>>>16&4;e=c<<b;c=e+245760>>>16&2;a=(e<<c>>>15|0)-(c|(a|b))|0;e=(f>>>a+21&1|a<<1)+28|0}c=m[(e<<2)+2864>>2];q:{r:{s:{if(!c){a=0;break s}a=0;b=f<<((e|0)==31?0:25-(e>>>1|0)|0);while(1){t:{g=(m[c+4>>2]&-8)-f|0;if(g>>>0>=h>>>0){break t}d=c;h=g;if(g){break t}h=0;a=c;break r}g=m[c+20>>2];c=m[((b>>>29&4)+c|0)+16>>2];a=g?(g|0)==(c|0)?a:g:a;b=b<<1;if(c){continue}break}}if(!(a|d)){a=2<<e;a=(a|0-a)&i;if(!a){break l}b=(a&0-a)-1|0;a=b>>>12&16;c=b>>>a|0;b=c>>>5&8;e=c>>>b|0;c=e>>>2&4;g=e>>>c|0;e=g>>>1&2;j=g>>>e|0;g=j>>>1&1;a=m[((g|(e|(c|(a|b))))+(j>>>g|0)<<2)+2864>>2]}if(!a){break q}}while(1){c=(m[a+4>>2]&-8)-f|0;b=c>>>0<h>>>0;h=b?c:h;d=b?a:d;b=m[a+16>>2];if(b){a=b}else{a=m[a+20>>2]}if(a){continue}break}}if(!d|m[642]-f>>>0<=h>>>0){break l}g=d+f|0;if(g>>>0<=d>>>0){break k}j=m[d+24>>2];b=m[d+12>>2];if((d|0)!=(b|0)){a=m[d+8>>2];m[a+12>>2]=b;m[b+8>>2]=a;break c}c=d+20|0;a=m[c>>2];if(!a){a=m[d+16>>2];if(!a){break i}c=d+16|0}while(1){e=c;b=a;c=a+20|0;a=m[c>>2];if(a){continue}c=b+16|0;a=m[b+16>>2];if(a){continue}break}m[e>>2]=0;break c}b=m[642];if(b>>>0>=f>>>0){a=m[645];c=b-f|0;u:{if(c>>>0>=16){m[642]=c;d=a+f|0;m[645]=d;m[d+4>>2]=c|1;m[a+b>>2]=c;m[a+4>>2]=f|3;break u}m[645]=0;m[642]=0;m[a+4>>2]=b|3;b=a+b|0;m[b+4>>2]=m[b+4>>2]|1}a=a+8|0;break a}d=m[643];if(d>>>0>f>>>0){b=d-f|0;m[643]=b;a=m[646];c=a+f|0;m[646]=c;m[c+4>>2]=b|1;m[a+4>>2]=f|3;a=a+8|0;break a}a=0;h=f+47|0;e=h;if(m[758]){c=m[760]}else{m[761]=-1;m[762]=-1;m[759]=4096;m[760]=4096;m[758]=o+12&-16^1431655768;m[763]=0;m[751]=0;c=4096}g=0-c|0;e=c+e|0;c=g&e;if(c>>>0<=f>>>0){break a}i=m[750];if(i){j=m[748];b=j+c|0;if(b>>>0<=j>>>0|b>>>0>i>>>0){break a}}if(n[3004]&4){break f}v:{w:{b=m[646];if(b){a=3008;while(1){i=m[a>>2];if(b>>>0<i+m[a+4>>2]>>>0?i>>>0<=b>>>0:0){break w}a=m[a+8>>2];if(a){continue}break}}b=Y(0);if((b|0)==-1){break g}e=c;a=m[759];d=a-1|0;if(d&b){e=(c-b|0)+(b+d&0-a)|0}if(e>>>0>2147483646|f>>>0>=e>>>0){break g}d=m[750];if(d){g=m[748];a=g+e|0;if(a>>>0<=g>>>0|a>>>0>d>>>0){break g}}a=Y(e);if((b|0)!=(a|0)){break v}break e}e=g&e-d;if(e>>>0>2147483646){break g}b=Y(e);if((b|0)==(m[a+4>>2]+m[a>>2]|0)){break h}a=b}if(!((a|0)==-1|f+48>>>0<=e>>>0)){b=m[760];b=0-b&b+(h-e|0);if(b>>>0>2147483646){b=a;break e}if((Y(b)|0)!=-1){e=b+e|0;b=a;break e}Y(0-e|0);break g}b=a;if((a|0)!=-1){break e}break g}C()}d=0;break b}b=0;break c}if((b|0)!=-1){break e}}m[751]=m[751]|4}if(c>>>0>2147483646){break d}b=Y(c);a=Y(0);if(b>>>0>=a>>>0|(b|0)==-1|(a|0)==-1){break d}e=a-b|0;if(e>>>0<=f+40>>>0){break d}}a=m[748]+e|0;m[748]=a;if(a>>>0>p[749]){m[749]=a}x:{y:{z:{d=m[646];if(d){a=3008;while(1){c=m[a+4>>2];h=m[a>>2];if((c+h|0)==(b|0)){break z}a=m[a+8>>2];if(a){continue}break}break y}a=m[644];if(!(a>>>0<=b>>>0?a:0)){m[644]=b}a=0;m[753]=e;m[752]=b;m[648]=-1;m[649]=m[758];m[755]=0;while(1){c=a<<3;d=c+2600|0;m[c+2608>>2]=d;m[c+2612>>2]=d;a=a+1|0;if((a|0)!=32){continue}break}a=e-40|0;c=b+8&7?-8-b&7:0;d=a-c|0;m[643]=d;c=b+c|0;m[646]=c;m[c+4>>2]=d|1;m[(a+b|0)+4>>2]=40;m[647]=m[762];break x}if(m[a+12>>2]&8|(d>>>0<h>>>0|b>>>0<=d>>>0)){break y}m[a+4>>2]=c+e;a=d+8&7?-8-d&7:0;b=a+d|0;m[646]=b;c=m[643]+e|0;a=c-a|0;m[643]=a;m[b+4>>2]=a|1;m[(c+d|0)+4>>2]=40;m[647]=m[762];break x}if(p[644]>b>>>0){m[644]=b}c=b+e|0;a=3008;A:{B:{C:{D:{E:{F:{while(1){if((c|0)!=m[a>>2]){a=m[a+8>>2];if(a){continue}break F}break}if(!(n[a+12|0]&8)){break E}}a=3008;while(1){c=m[a>>2];if(c>>>0<=d>>>0){h=c+m[a+4>>2]|0;if(h>>>0>d>>>0){break D}}a=m[a+8>>2];continue}}m[a>>2]=b;m[a+4>>2]=m[a+4>>2]+e;i=(b+8&7?-8-b&7:0)+b|0;m[i+4>>2]=f|3;e=c+(c+8&7?-8-c&7:0)|0;c=(e-i|0)-f|0;g=f+i|0;if((d|0)==(e|0)){m[646]=g;a=m[643]+c|0;m[643]=a;m[g+4>>2]=a|1;break B}if(m[645]==(e|0)){m[645]=g;a=m[642]+c|0;m[642]=a;m[g+4>>2]=a|1;m[a+g>>2]=a;break B}a=m[e+4>>2];if((a&3)==1){j=a&-8;G:{if(a>>>0<=255){f=a>>>3|0;a=m[e+8>>2];b=m[e+12>>2];if((b|0)==(a|0)){m[640]=m[640]&eb(f);break G}m[a+12>>2]=b;m[b+8>>2]=a;break G}d=m[e+24>>2];b=m[e+12>>2];H:{if((e|0)!=(b|0)){a=m[e+8>>2];m[a+12>>2]=b;m[b+8>>2]=a;break H}I:{a=e+20|0;h=m[a>>2];if(h){break I}a=e+16|0;h=m[a>>2];if(h){break I}b=0;break H}while(1){f=a;b=h;a=b+20|0;h=m[a>>2];if(h){continue}a=b+16|0;h=m[b+16>>2];if(h){continue}break}m[f>>2]=0}if(!d){break G}a=m[e+28>>2];f=(a<<2)+2864|0;J:{if(m[f>>2]==(e|0)){m[f>>2]=b;if(b){break J}m[641]=m[641]&eb(a);break G}m[d+(m[d+16>>2]==(e|0)?16:20)>>2]=b;if(!b){break G}}m[b+24>>2]=d;a=m[e+16>>2];if(a){m[b+16>>2]=a;m[a+24>>2]=b}a=m[e+20>>2];if(!a){break G}m[b+20>>2]=a;m[a+24>>2]=b}e=e+j|0;c=c+j|0}m[e+4>>2]=m[e+4>>2]&-2;m[g+4>>2]=c|1;m[c+g>>2]=c;if(c>>>0<=255){b=c>>>3|0;a=(b<<3)+2600|0;b=1<<b;c=m[640];K:{if(!(b&c)){m[640]=b|c;b=a;break K}b=m[a+8>>2]}m[a+8>>2]=g;m[b+12>>2]=g;m[g+12>>2]=a;m[g+8>>2]=b;break B}a=31;if(c>>>0<=16777215){b=c>>>8|0;a=b+1048320>>>16&8;f=b<<a;b=f+520192>>>16&4;d=f<<b;f=d+245760>>>16&2;a=(d<<f>>>15|0)-(f|(a|b))|0;a=(c>>>a+21&1|a<<1)+28|0}m[g+28>>2]=a;m[g+16>>2]=0;m[g+20>>2]=0;b=(a<<2)+2864|0;f=1<<a;d=m[641];L:{if(!(f&d)){m[641]=d|f;m[b>>2]=g;m[g+24>>2]=b;break L}a=c<<((a|0)==31?0:25-(a>>>1|0)|0);b=m[b>>2];while(1){f=b;if((m[b+4>>2]&-8)==(c|0)){break C}b=a>>>29|0;a=a<<1;d=f+(b&4)|0;b=m[d+16>>2];if(b){continue}break}m[d+16>>2]=g;m[g+24>>2]=f}m[g+12>>2]=g;m[g+8>>2]=g;break B}a=e-40|0;c=b+8&7?-8-b&7:0;g=a-c|0;m[643]=g;c=b+c|0;m[646]=c;m[c+4>>2]=g|1;m[(a+b|0)+4>>2]=40;m[647]=m[762];a=(h+(h-39&7?39-h&7:0)|0)-47|0;c=a>>>0<d+16>>>0?d:a;m[c+4>>2]=27;a=m[755];m[c+16>>2]=m[754];m[c+20>>2]=a;a=m[753];m[c+8>>2]=m[752];m[c+12>>2]=a;m[754]=c+8;m[753]=e;m[752]=b;m[755]=0;a=c+24|0;while(1){m[a+4>>2]=7;b=a+8|0;a=a+4|0;if(b>>>0<h>>>0){continue}break}if((c|0)==(d|0)){break x}m[c+4>>2]=m[c+4>>2]&-2;h=c-d|0;m[d+4>>2]=h|1;m[c>>2]=h;if(h>>>0<=255){b=h>>>3|0;a=(b<<3)+2600|0;b=1<<b;c=m[640];M:{if(!(b&c)){m[640]=b|c;b=a;break M}b=m[a+8>>2]}m[a+8>>2]=d;m[b+12>>2]=d;m[d+12>>2]=a;m[d+8>>2]=b;break x}a=31;m[d+16>>2]=0;m[d+20>>2]=0;if(h>>>0<=16777215){b=h>>>8|0;a=b+1048320>>>16&8;c=b<<a;b=c+520192>>>16&4;e=c<<b;c=e+245760>>>16&2;a=(e<<c>>>15|0)-(c|(a|b))|0;a=(h>>>a+21&1|a<<1)+28|0}m[d+28>>2]=a;b=(a<<2)+2864|0;c=m[641];e=1<<a;N:{if(!(c&e)){m[641]=c|e;m[b>>2]=d;m[d+24>>2]=b;break N}a=h<<((a|0)==31?0:25-(a>>>1|0)|0);b=m[b>>2];while(1){c=b;if((h|0)==(m[b+4>>2]&-8)){break A}b=a>>>29|0;a=a<<1;e=c+(b&4)|0;b=m[e+16>>2];if(b){continue}break}m[e+16>>2]=d;m[d+24>>2]=c}m[d+12>>2]=d;m[d+8>>2]=d;break x}a=m[f+8>>2];m[a+12>>2]=g;m[f+8>>2]=g;m[g+24>>2]=0;m[g+12>>2]=f;m[g+8>>2]=a}a=i+8|0;break a}a=m[c+8>>2];m[a+12>>2]=d;m[c+8>>2]=d;m[d+24>>2]=0;m[d+12>>2]=c;m[d+8>>2]=a}a=m[643];if(a>>>0<=f>>>0){break d}b=a-f|0;m[643]=b;a=m[646];c=a+f|0;m[646]=c;m[c+4>>2]=b|1;m[a+4>>2]=f|3;a=a+8|0;break a}m[620]=48;a=0;break a}O:{if(!j){break O}a=m[d+28>>2];c=(a<<2)+2864|0;P:{if(m[c>>2]==(d|0)){m[c>>2]=b;if(b){break P}i=eb(a)&i;m[641]=i;break O}m[j+(m[j+16>>2]==(d|0)?16:20)>>2]=b;if(!b){break O}}m[b+24>>2]=j;a=m[d+16>>2];if(a){m[b+16>>2]=a;m[a+24>>2]=b}a=m[d+20>>2];if(!a){break O}m[b+20>>2]=a;m[a+24>>2]=b}Q:{if(h>>>0<=15){a=f+h|0;m[d+4>>2]=a|3;a=a+d|0;m[a+4>>2]=m[a+4>>2]|1;break Q}m[d+4>>2]=f|3;m[g+4>>2]=h|1;m[g+h>>2]=h;if(h>>>0<=255){b=h>>>3|0;a=(b<<3)+2600|0;b=1<<b;c=m[640];R:{if(!(b&c)){m[640]=b|c;b=a;break R}b=m[a+8>>2]}m[a+8>>2]=g;m[b+12>>2]=g;m[g+12>>2]=a;m[g+8>>2]=b;break Q}a=31;if(h>>>0<=16777215){b=h>>>8|0;a=b+1048320>>>16&8;c=b<<a;b=c+520192>>>16&4;f=c<<b;c=f+245760>>>16&2;a=(f<<c>>>15|0)-(c|(a|b))|0;a=(h>>>a+21&1|a<<1)+28|0}m[g+28>>2]=a;m[g+16>>2]=0;m[g+20>>2]=0;b=(a<<2)+2864|0;S:{c=1<<a;T:{if(!(c&i)){m[641]=c|i;m[b>>2]=g;break T}a=h<<((a|0)==31?0:25-(a>>>1|0)|0);f=m[b>>2];while(1){b=f;if((m[b+4>>2]&-8)==(h|0)){break S}c=a>>>29|0;a=a<<1;c=b+(c&4)|0;f=m[c+16>>2];if(f){continue}break}m[c+16>>2]=g}m[g+24>>2]=b;m[g+12>>2]=g;m[g+8>>2]=g;break Q}a=m[b+8>>2];m[a+12>>2]=g;m[b+8>>2]=g;m[g+24>>2]=0;m[g+12>>2]=b;m[g+8>>2]=a}a=d+8|0;break a}U:{if(!j){break U}a=m[b+28>>2];c=(a<<2)+2864|0;V:{if(m[c>>2]==(b|0)){m[c>>2]=d;if(d){break V}m[641]=eb(a)&k;break U}m[(m[j+16>>2]==(b|0)?16:20)+j>>2]=d;if(!d){break U}}m[d+24>>2]=j;a=m[b+16>>2];if(a){m[d+16>>2]=a;m[a+24>>2]=d}a=m[b+20>>2];if(!a){break U}m[d+20>>2]=a;m[a+24>>2]=d}W:{if(h>>>0<=15){a=f+h|0;m[b+4>>2]=a|3;a=a+b|0;m[a+4>>2]=m[a+4>>2]|1;break W}m[b+4>>2]=f|3;m[l+4>>2]=h|1;m[h+l>>2]=h;if(i){c=i>>>3|0;a=(c<<3)+2600|0;f=m[645];c=1<<c;X:{if(!(c&e)){m[640]=c|e;c=a;break X}c=m[a+8>>2]}m[a+8>>2]=f;m[c+12>>2]=f;m[f+12>>2]=a;m[f+8>>2]=c}m[645]=l;m[642]=h}a=b+8|0}T=o+16|0;return a|0}function ea(a,b,c){var d=0,e=0,f=0,g=0,h=0,i=0,j=0,q=0;if((U|0)==2){m[V>>2]=m[V>>2]-28;b=m[V>>2];a=m[b>>2];c=m[b+8>>2];d=m[b+12>>2];f=m[b+16>>2];i=m[b+20>>2];j=m[b+24>>2];b=m[b+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;g=m[m[V>>2]>>2]}a:{if(!U){d=T-1584|0;T=d;m[d+1580>>2]=0;m[d+1576>>2]=0;l[d+1574>>1]=0;l[d+1572>>1]=0;k[d+1571|0]=0;k[d+1570|0]=0;k[d+1569|0]=0;k[d+1568|0]=0;k[2464]=0;b=Ha(b);m[618]=b;b=!b;i=!b}if((U|0)==2|i){if(!U){i=d+16|0;b=d+12|0}if(U?!g:1){e=da(b,i);if((U|0)==1){break a}b=e}b:{if(!U){if(b){break b}j=d+1571|0;b=La(m[d+12>>2],d+16|0,d+1576|0,j,d+1570|0);if(b){break b}m[617]=n[d+1570|0];i=n[d+1571|0];f=d+1580|0;b=m[d+1576>>2]}if(U?(g|0)==1:1){e=xa(b,i,f);h=1;if((U|0)==1){break a}b=e}c:{if(!U){if(b){break c}i=255;b=c-1|0;c=(b&255)>>>0>1?-1:b;b=(c&255)==255}d:{if(!U){if(b){break d}i=d+1567|0;f=d+1566|0;b=c&255}if(U?(g|0)==2:1){e=fa(b,i,f);h=2;if((U|0)==1){break a}f=e}if(!U){if(!(f|(a|0)==2)){b=12;if(n[d+1566|0]){break c}}b=(f|0)==16389;if(b){i=c;break d}i=c;b=f;if(b){break c}}}b=U?b:(a|0)==1;e:{f:{if(b|(U|0)==2){while(1){b=U?b:n[2464];if(b|(U|0)==2){b=U?b:255;if(U?(g|0)==3:1){Z();h=3;if((U|0)==1){break a}}if(!U){break b}}if(!U){c=d+16|0;b=d+12|0}if(U?(g|0)==4:1){e=da(b,c);h=4;if((U|0)==1){break a}b=e}if(!U){c=!b;if(c){c=d+16|0;f=d+1568|0;j=d+1574|0;b=ka(m[d+12>>2],c,f,j,d+784|0,d+1572|0,d+1569|0)}}g:{if(!U){h:{switch(b|0){case 2:break f;case 0:break h;default:break g}}c=o[d+1574>>1];b=n[d+1568|0]}if(U?(g|0)==5:1){e=cb(b,c);h=5;if((U|0)==1){break a}b=e}if(!U){if(b){break g}c=o[d+1574>>1];b=n[d+1568|0]}if(U?(g|0)==6:1){W[1](b,c);h=6;if((U|0)==1){break a}}b=U?b:0}if(!U){c=!b;if(c){continue}}break}if(!U){break e}}while(1){b=U?b:n[2464];if(b|(U|0)==2){b=U?b:255;if(U?(g|0)==7:1){Z();h=7;if((U|0)==1){break a}}if(!U){break b}}if(!U){c=d+16|0;b=d+12|0}if(U?(g|0)==8:1){e=da(b,c);h=8;if((U|0)==1){break a}b=e}if(!U){c=!b;if(c){c=d+16|0;f=d+1568|0;j=d+1574|0;b=ka(m[d+12>>2],c,f,j,d+784|0,d+1572|0,d+1569|0)}}i:{if(!U){j:{switch(b|0){case 2:break f;case 0:break j;default:break i}}b=0}k:{l:{if(!U){m:{switch(a|0){case 2:break l;case 0:break m;default:break k}}c=o[d+1574>>1];f=d+784|0;j=o[d+1572>>1];b=n[d+1568|0]}if(U?(g|0)==9:1){e=na(b,c,f,j);h=9;if((U|0)==1){break a}b=e}if(b?!U:0){break e}}if(!U){f=o[d+1572>>1];b=o[d+1574>>1];c=n[d+1568|0];j=f+(b+(c+n[d+1569|0]|0)+(b>>>8)|0)|0;f=j+(f>>>8|0)&255}if(U?(g|0)==10:1){e=bb(c,b,f);h=10;if((U|0)==1){break a}b=e}}if(!U){if(b){break i}c=o[d+1574>>1];b=n[d+1568|0]}if(U?(g|0)==11:1){W[1](b,c);h=11;if((U|0)==1){break a}}b=U?b:0}if(!U){c=!b;if(c){continue}}break}if(!U){break e}}n:{if(!U){if(a){break n}b=i&255;if((b|0)==255){break n}c=d+1566|0;a=d+1567|0}q=a;if(U?(g|0)==12:1){e=fa(b,a,c);h=12;if((U|0)==1){break a}b=e}a=U?q:(b|0)!=16389;if(a|(U|0)==2){if(!U){if(b){break e}b=8;a=n[d+1567|0];if(a){break e}a=i&255}if(U?(g|0)==13:1){e=qa(a);h=13;if((U|0)==1){break a}b=e}if(U?(g|0)==14:1){Z();h=14;if((U|0)==1){break a}}if(!U){break b}}b=U?b:0;if(U?(g|0)==15:1){Z();h=15;if((U|0)==1){break a}}if(!U){break b}}if(!U){b=0;a=a&-3;if(a){break e}a=p[d+1580>>2]<66068;if(a){break e}}if(U?(g|0)==16:1){e=ab();h=16;if((U|0)==1){break a}b=e}}if(U?(g|0)==17:1){Z();h=17;if((U|0)==1){break a}}if(!U){break b}}if(!U){a=b&8192;if(a){break b}}if(U?(g|0)==18:1){Z();h=18;if((U|0)==1){break a}}}a=U?a:m[618];if(a|(U|0)==2){if(U?(g|0)==19:1){Ka(a);h=19;if((U|0)==1){break a}}if(!U){m[618]=0}}}if(!U){T=d+1584|0;return b}C()}m[m[V>>2]>>2]=h;m[V>>2]=m[V>>2]+4;e=m[V>>2];m[e>>2]=a;m[e+4>>2]=b;m[e+8>>2]=c;m[e+12>>2]=d;m[e+16>>2]=f;m[e+20>>2]=i;m[e+24>>2]=j;m[V>>2]=m[V>>2]+28;return 0}function aa(a){a=a|0;var b=0,c=0,d=0,e=0,f=0,g=0,h=0;a:{if(!a){break a}d=a-8|0;b=m[a-4>>2];a=b&-8;f=d+a|0;b:{if(b&1){break b}if(!(b&3)){break a}b=m[d>>2];d=d-b|0;if(d>>>0<p[644]){break a}a=a+b|0;if(m[645]!=(d|0)){if(b>>>0<=255){e=m[d+8>>2];b=b>>>3|0;c=m[d+12>>2];if((c|0)==(e|0)){m[640]=m[640]&eb(b);break b}m[e+12>>2]=c;m[c+8>>2]=e;break b}h=m[d+24>>2];b=m[d+12>>2];c:{if((d|0)!=(b|0)){c=m[d+8>>2];m[c+12>>2]=b;m[b+8>>2]=c;break c}d:{e=d+20|0;c=m[e>>2];if(c){break d}e=d+16|0;c=m[e>>2];if(c){break d}b=0;break c}while(1){g=e;b=c;e=b+20|0;c=m[e>>2];if(c){continue}e=b+16|0;c=m[b+16>>2];if(c){continue}break}m[g>>2]=0}if(!h){break b}e=m[d+28>>2];c=(e<<2)+2864|0;e:{if(m[c>>2]==(d|0)){m[c>>2]=b;if(b){break e}m[641]=m[641]&eb(e);break b}m[h+(m[h+16>>2]==(d|0)?16:20)>>2]=b;if(!b){break b}}m[b+24>>2]=h;c=m[d+16>>2];if(c){m[b+16>>2]=c;m[c+24>>2]=b}c=m[d+20>>2];if(!c){break b}m[b+20>>2]=c;m[c+24>>2]=b;break b}b=m[f+4>>2];if((b&3)!=3){break b}m[642]=a;m[f+4>>2]=b&-2;m[d+4>>2]=a|1;m[a+d>>2]=a;return}if(d>>>0>=f>>>0){break a}b=m[f+4>>2];if(!(b&1)){break a}f:{if(!(b&2)){if(m[646]==(f|0)){m[646]=d;a=m[643]+a|0;m[643]=a;m[d+4>>2]=a|1;if(m[645]!=(d|0)){break a}m[642]=0;m[645]=0;return}if(m[645]==(f|0)){m[645]=d;a=m[642]+a|0;m[642]=a;m[d+4>>2]=a|1;m[a+d>>2]=a;return}a=(b&-8)+a|0;g:{if(b>>>0<=255){e=m[f+8>>2];b=b>>>3|0;c=m[f+12>>2];if((c|0)==(e|0)){m[640]=m[640]&eb(b);break g}m[e+12>>2]=c;m[c+8>>2]=e;break g}h=m[f+24>>2];b=m[f+12>>2];h:{if((f|0)!=(b|0)){c=m[f+8>>2];m[c+12>>2]=b;m[b+8>>2]=c;break h}i:{e=f+20|0;c=m[e>>2];if(c){break i}e=f+16|0;c=m[e>>2];if(c){break i}b=0;break h}while(1){g=e;b=c;e=b+20|0;c=m[e>>2];if(c){continue}e=b+16|0;c=m[b+16>>2];if(c){continue}break}m[g>>2]=0}if(!h){break g}e=m[f+28>>2];c=(e<<2)+2864|0;j:{if(m[c>>2]==(f|0)){m[c>>2]=b;if(b){break j}m[641]=m[641]&eb(e);break g}m[h+(m[h+16>>2]==(f|0)?16:20)>>2]=b;if(!b){break g}}m[b+24>>2]=h;c=m[f+16>>2];if(c){m[b+16>>2]=c;m[c+24>>2]=b}c=m[f+20>>2];if(!c){break g}m[b+20>>2]=c;m[c+24>>2]=b}m[d+4>>2]=a|1;m[a+d>>2]=a;if(m[645]!=(d|0)){break f}m[642]=a;return}m[f+4>>2]=b&-2;m[d+4>>2]=a|1;m[a+d>>2]=a}if(a>>>0<=255){a=a>>>3|0;b=(a<<3)+2600|0;c=1<<a;a=m[640];k:{if(!(c&a)){m[640]=a|c;a=b;break k}a=m[b+8>>2]}m[b+8>>2]=d;m[a+12>>2]=d;m[d+12>>2]=b;m[d+8>>2]=a;return}e=31;m[d+16>>2]=0;m[d+20>>2]=0;if(a>>>0<=16777215){b=a>>>8|0;g=b+1048320>>>16&8;b=b<<g;e=b+520192>>>16&4;b=b<<e;c=b+245760>>>16&2;b=(b<<c>>>15|0)-(c|(e|g))|0;e=(a>>>b+21&1|b<<1)+28|0}m[d+28>>2]=e;g=(e<<2)+2864|0;l:{m:{c=m[641];b=1<<e;n:{if(!(c&b)){m[641]=b|c;m[g>>2]=d;m[d+24>>2]=g;break n}e=a<<((e|0)==31?0:25-(e>>>1|0)|0);b=m[g>>2];while(1){c=b;if((m[b+4>>2]&-8)==(a|0)){break m}b=e>>>29|0;e=e<<1;g=c+(b&4)|0;b=m[g+16>>2];if(b){continue}break}m[g+16>>2]=d;m[d+24>>2]=c}m[d+12>>2]=d;m[d+8>>2]=d;break l}a=m[c+8>>2];m[a+12>>2]=d;m[c+8>>2]=d;m[d+24>>2]=0;m[d+12>>2]=c;m[d+8>>2]=a}a=m[648]-1|0;m[648]=a?a:-1}}function na(a,b,c,d){var e=0,f=0,g=0,h=0,i=0,j=0,l=0,o=0,p=0,q=0,r=0;if((U|0)==2){m[V>>2]=m[V>>2]-48;b=m[V>>2];a=m[b>>2];c=m[b+8>>2];d=m[b+12>>2];e=m[b+16>>2];f=m[b+20>>2];h=m[b+24>>2];j=m[b+28>>2];l=m[b+32>>2];i=m[b+36>>2];q=m[b+40>>2];o=m[b+44>>2];b=m[b+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;p=m[m[V>>2]>>2]}a:{if(!U){f=T-1040|0;T=f;k[f+7|0]=0;e=a>>>0<=63}b:{if((U|0)==2|e){if(U?!p:1){g=ba(a,b);if((U|0)==1){break a}e=g}if(e?!U:0){break b}}q=U?q:d+11|0;while(1){if(!U){e=m[m[548]+16>>2];j=e>>>0<q-l>>>0}if((U|0)==2|j){if(!U){h=c+l|0;j=e-11&65535;i=f+12|0;o=f+8|0;e=Ra(h,j,f+528|0,i,o)}c:{if(!U){if(e){break c}h=f+528|0;i=m[f+12>>2];o=m[m[548]+12>>2];e=m[f+8>>2]}if(U?(p|0)==1:1){g=W[o|0](h,i)|0;r=1;if((U|0)==1){break a}h=g}if(!U){if(h){e=h|8192;break c}i=m[m[548]+8>>2];h=f+16|0}if(U?(p|0)==2:1){g=W[i|0](h,e)|0;r=2;if((U|0)==1){break a}e=g}if(!U){if(e){e=e|8192;break c}i=f+7|0;e=$(f+16|0,m[f+8>>2],i)}}if(!U){l=l+j|0;g=n[f+7|0];h=g|16384;e=g?h:e;j=!e;if(j){continue}break b}}break}if(!U){c=c+l|0;d=d-l&65535;e=Ya(a,b,c,d,f+528|0,f+12|0,f+8|0)}d:{if(!U){if(e){break d}b=f+528|0;c=m[f+12>>2];d=m[m[548]+12>>2];a=m[f+8>>2]}if(U?(p|0)==3:1){g=W[d|0](b,c)|0;r=3;if((U|0)==1){break a}b=g}if(!U){if(b){e=b|8192;break d}c=m[m[548]+8>>2];b=f+16|0}if(U?(p|0)==4:1){g=W[c|0](b,a)|0;r=4;if((U|0)==1){break a}a=g}if(!U){if(a){e=a|8192;break d}e=$(f+16|0,m[f+8>>2],f+7|0)}}if(!U){a=n[f+7|0];if(!a){break b}e=a|16384}}if(!U){T=f+1040|0;return e}C()}m[m[V>>2]>>2]=r;m[V>>2]=m[V>>2]+4;g=m[V>>2];m[g>>2]=a;m[g+4>>2]=b;m[g+8>>2]=c;m[g+12>>2]=d;m[g+16>>2]=e;m[g+20>>2]=f;m[g+24>>2]=h;m[g+28>>2]=j;m[g+32>>2]=l;m[g+36>>2]=i;m[g+40>>2]=q;m[g+44>>2]=o;m[V>>2]=m[V>>2]+48;return 0}function xa(a,b,c){var d=0,e=0,f=0,g=0,h=0,i=0,j=0,l=0;if((U|0)==2){m[V>>2]=m[V>>2]-32;b=m[V>>2];a=m[b>>2];c=m[b+8>>2];d=m[b+12>>2];e=m[b+16>>2];g=m[b+20>>2];h=m[b+24>>2];i=m[b+28>>2];b=m[b+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;j=m[m[V>>2]>>2]}if(!U){d=T-1056|0;T=d;m[548]=1036;m[d+1052>>2]=0;m[d+1048>>2]=0;m[d+1044>>2]=0;k[d+15|0]=0;k[d+14|0]=0;ha(2208,256);e=m[259]}a:{if(U?!j:1){f=W[e|0]()|0;if((U|0)==1){break a}e=f}b:{c:{d:{if(!U){if(e){e=e|8192;break d}e=$a(d+528|0,d+1052|0,d+1048|0);if(e){break d}g=d+528|0;h=m[d+1052>>2];i=m[m[548]+12>>2];e=m[d+1048>>2]}if(U?(j|0)==1:1){f=W[i|0](g,h)|0;l=1;if((U|0)==1){break a}g=f}if(!U){if(g){e=g|8192;break d}h=m[m[548]+8>>2];g=d+16|0}if(U?(j|0)==2:1){f=W[h|0](g,e)|0;l=2;if((U|0)==1){break a}e=f}if(!U){if(!e){break c}e=e|8192}}if(!U){if(Ma(d+16|0,m[d+1048>>2],d+14|0)){break b}e=n[d+14|0]|16384;break b}}if(!U){e=_a(d+16|0,m[d+1048>>2],d+1044|0,d+15|0,c,d+14|0);if(e){break b}e=6;if(m[d+1044>>2]!=(a|0)|n[d+15|0]!=(b|0)){break b}a=n[d+14|0];e=n[c+2|0]<<16==65536?a?a|16384:0:7}}if(!U){T=d+1056|0;return e}C()}m[m[V>>2]>>2]=l;m[V>>2]=m[V>>2]+4;f=m[V>>2];m[f>>2]=a;m[f+4>>2]=b;m[f+8>>2]=c;m[f+12>>2]=d;m[f+16>>2]=e;m[f+20>>2]=g;m[f+24>>2]=h;m[f+28>>2]=i;m[V>>2]=m[V>>2]+32;return 0}function ba(a,b){var c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,p=0;if((U|0)==2){m[V>>2]=m[V>>2]-32;b=m[V>>2];a=m[b>>2];c=m[b+8>>2];d=m[b+12>>2];e=m[b+16>>2];g=m[b+20>>2];h=m[b+24>>2];i=m[b+28>>2];b=m[b+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;j=m[m[V>>2]>>2]}if(!U){c=T-1056|0;T=c;l[c+1046>>1]=0;l[c+1044>>1]=0;k[c+15|0]=0;e=9;d=a>>>0>63}a:{b:{if(!U){if(d){break b}i=(a<<2)+2208|0;e=m[i>>2];d=!e}if((U|0)==2|d){if(!U){e=0;d=c+528|0;g=c+1052|0;h=c+1048|0;a=Ta(a,d,g,h)}c:{if(!U){if(a){break c}d=c+528|0;g=m[c+1052>>2];h=m[m[548]+12>>2];a=m[c+1048>>2]}if(U?!j:1){f=W[h|0](d,g)|0;if((U|0)==1){break a}d=f}if(!U){if(d){a=d|8192;break c}g=m[m[548]+8>>2];d=c+16|0}if(U?(j|0)==1:1){f=W[g|0](d,a)|0;p=1;if((U|0)==1){break a}a=f}if(!U){if(a){a=a|8192;break c}a=Sa(c+16|0,m[c+1048>>2],c+1046|0,c+1044|0,c+15|0);e=n[c+15|0]}}if(!U){d=e&255;f=d|16384;a=d?f:a;e=a?a:f;if(a|d){break b}e=o[c+1044>>1]|o[c+1046>>1]<<16;m[i>>2]=e}}e=U?e:e>>>16>>>0>b>>>0?10:(e&65535)>>>0<b>>>0?10:0}if(!U){T=c+1056|0;return e}C()}m[m[V>>2]>>2]=p;m[V>>2]=m[V>>2]+4;f=m[V>>2];m[f>>2]=a;m[f+4>>2]=b;m[f+8>>2]=c;m[f+12>>2]=d;m[f+16>>2]=e;m[f+20>>2]=g;m[f+24>>2]=h;m[f+28>>2]=i;m[V>>2]=m[V>>2]+32;return 0}function va(a,b,c){var d=0,e=0;if(c>>>0>=512){P(a|0,b|0,c|0)|0;return}d=a+c|0;a:{if(!((a^b)&3)){b:{if((c|0)<1){c=a;break b}if(!(a&3)){c=a;break b}c=a;while(1){k[c|0]=n[b|0];b=b+1|0;c=c+1|0;if(d>>>0<=c>>>0){break b}if(c&3){continue}break}}a=d&-4;c:{if(a>>>0<64){break c}e=a+ -64|0;if(e>>>0<c>>>0){break c}while(1){m[c>>2]=m[b>>2];m[c+4>>2]=m[b+4>>2];m[c+8>>2]=m[b+8>>2];m[c+12>>2]=m[b+12>>2];m[c+16>>2]=m[b+16>>2];m[c+20>>2]=m[b+20>>2];m[c+24>>2]=m[b+24>>2];m[c+28>>2]=m[b+28>>2];m[c+32>>2]=m[b+32>>2];m[c+36>>2]=m[b+36>>2];m[c+40>>2]=m[b+40>>2];m[c+44>>2]=m[b+44>>2];m[c+48>>2]=m[b+48>>2];m[c+52>>2]=m[b+52>>2];m[c+56>>2]=m[b+56>>2];m[c+60>>2]=m[b+60>>2];b=b- -64|0;c=c- -64|0;if(e>>>0>=c>>>0){continue}break}}if(a>>>0<=c>>>0){break a}while(1){m[c>>2]=m[b>>2];b=b+4|0;c=c+4|0;if(a>>>0>c>>>0){continue}break}break a}if(d>>>0<4){c=a;break a}e=d-4|0;if(e>>>0<a>>>0){c=a;break a}c=a;while(1){k[c|0]=n[b|0];k[c+1|0]=n[b+1|0];k[c+2|0]=n[b+2|0];k[c+3|0]=n[b+3|0];b=b+4|0;c=c+4|0;if(e>>>0>=c>>>0){continue}break}}if(c>>>0<d>>>0){while(1){k[c|0]=n[b|0];b=b+1|0;c=c+1|0;if((d|0)!=(c|0)){continue}break}}}function bb(a,b,c){var d=0,e=0,f=0,g=0,h=0,i=0,j=0;if((U|0)==2){m[V>>2]=m[V>>2]-28;b=m[V>>2];a=m[b>>2];c=m[b+8>>2];d=m[b+12>>2];e=m[b+16>>2];g=m[b+20>>2];h=m[b+24>>2];b=m[b+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;i=m[m[V>>2]>>2]}a:{if(!U){d=T-1040|0;T=d;m[d+12>>2]=0;m[d+8>>2]=0;k[d+7|0]=0;k[d+6|0]=0;e=a>>>0<=63}b:{if((U|0)==2|e){if(U?!i:1){f=ba(a,b);if((U|0)==1){break a}e=f}if(e?!U:0){break b}}if(!U){e=Wa(a,b,d+528|0,d+12|0,d+8|0);if(e){break b}b=d+528|0;e=m[d+12>>2];g=m[m[548]+12>>2];a=m[d+8>>2]}if(U?(i|0)==1:1){f=W[g|0](b,e)|0;j=1;if((U|0)==1){break a}b=f}if(!U){if(b){e=b|8192;break b}e=m[m[548]+8>>2];b=d+16|0}if(U?(i|0)==2:1){f=W[e|0](b,a)|0;j=2;if((U|0)==1){break a}a=f}if(!U){if(a){e=a|8192;break b}e=la(d+16|0,m[d+8>>2],d+7|0,d+6|0);h=n[d+7|0];a=n[d+6|0];if(!a){break b}e=a|16384}}if(!U){T=d+1040|0;return e?e:((c|0)!=(h|0))<<3}C()}m[m[V>>2]>>2]=j;m[V>>2]=m[V>>2]+4;f=m[V>>2];m[f>>2]=a;m[f+4>>2]=b;m[f+8>>2]=c;m[f+12>>2]=d;m[f+16>>2]=e;m[f+20>>2]=g;m[f+24>>2]=h;m[V>>2]=m[V>>2]+28;return 0}function Ja(a,b){var c=0,d=0,e=0,f=0,g=0,h=0,i=0;if((U|0)==2){m[V>>2]=m[V>>2]-24;b=m[V>>2];a=m[b>>2];c=m[b+8>>2];e=m[b+12>>2];f=m[b+16>>2];g=m[b+20>>2];b=m[b+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;h=m[m[V>>2]>>2]}if(!U){g=767;f=a;c=m[b+76>>2]}a:{b:{while(1){c:{if(!U){c=!g;if(c){break c}c=m[b+4>>2];d=ya(c,m[b+8>>2]-c|0);d:{if(d){c=m[b+4>>2];e=(d-c|0)+1|0;break d}c=m[b+4>>2];e=m[b+8>>2]-c|0}i=c;c=e>>>0<g>>>0?e:g;va(f,i,c);e=m[b+4>>2]+c|0;m[b+4>>2]=e;f=c+f|0;if(d){break c}g=g-c|0;c=!g;if(c){break c}c=p[b+8>>2]>e>>>0}e:{if(!U){if(c){m[b+4>>2]=e+1;c=n[e|0];break e}}if(U?!h:1){d=za(b);if((U|0)==1){break a}c=d}if(!U){e=(c|0)>-1;if(e){break e}c=0;d=c;if(!(n[b|0]&16)|(a|0)==(f|0)){break b}break c}}if(!U){k[f|0]=c;f=f+1|0;g=g-1|0;c=(c&255)!=10;if(c){continue}}}break}if(U){a=c}else{d=0;if(!a){break b}k[f|0]=0}d=a}c=d;if(!U){return c}C()}m[m[V>>2]>>2]=0;m[V>>2]=m[V>>2]+4;d=m[V>>2];m[d>>2]=a;m[d+4>>2]=b;m[d+8>>2]=c;m[d+12>>2]=e;m[d+16>>2]=f;m[d+20>>2]=g;m[V>>2]=m[V>>2]+24;return 0}function fa(a,b,c){var d=0,e=0,f=0,g=0,h=0,i=0,j=0;if((U|0)==2){m[V>>2]=m[V>>2]-28;b=m[V>>2];a=m[b>>2];c=m[b+8>>2];d=m[b+12>>2];f=m[b+16>>2];g=m[b+20>>2];h=m[b+24>>2];b=m[b+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;i=m[m[V>>2]>>2]}if(!U){d=T-1056|0;T=d;m[d+1052>>2]=0;m[d+1048>>2]=0;k[d+15|0]=0;f=d+528|0;g=d+1052|0;h=d+1048|0;a=Qa(a,f,g,h)}a:{b:{if(!U){if(a){break b}f=d+528|0;g=m[d+1052>>2];h=m[m[548]+12>>2];a=m[d+1048>>2]}if(U?!i:1){e=W[h|0](f,g)|0;if((U|0)==1){break a}f=e}if(!U){if(f){a=f|8192;break b}g=m[m[548]+8>>2];f=d+16|0}if(U?(i|0)==1:1){e=W[g|0](f,a)|0;j=1;if((U|0)==1){break a}a=e}if(!U){if(a){a=a|8192;break b}a=Pa(d+16|0,m[d+1048>>2],b,c,d+15|0);if(a){break b}a=n[d+15|0];if(!a){a=0;break b}a=a|16384}}if(!U){T=d+1056|0;return a}C()}m[m[V>>2]>>2]=j;m[V>>2]=m[V>>2]+4;e=m[V>>2];m[e>>2]=a;m[e+4>>2]=b;m[e+8>>2]=c;m[e+12>>2]=d;m[e+16>>2]=f;m[e+20>>2]=g;m[e+24>>2]=h;m[V>>2]=m[V>>2]+28;return 0}function cb(a,b){var c=0,d=0,e=0,f=0,g=0,h=0;if((U|0)==2){m[V>>2]=m[V>>2]-20;b=m[V>>2];a=m[b>>2];c=m[b+8>>2];d=m[b+12>>2];f=m[b+16>>2];b=m[b+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;g=m[m[V>>2]>>2]}a:{if(!U){c=T-1040|0;T=c;m[c+12>>2]=0;m[c+8>>2]=0;k[c+7|0]=0;d=a>>>0<=63}b:{if((U|0)==2|d){if(U?!g:1){e=ba(a,b);if((U|0)==1){break a}d=e}if(d?!U:0){break b}}if(!U){d=Va(a,b,c+528|0,c+12|0,c+8|0);if(d){break b}b=c+528|0;d=m[c+12>>2];f=m[m[548]+12>>2];a=m[c+8>>2]}if(U?(g|0)==1:1){e=W[f|0](b,d)|0;h=1;if((U|0)==1){break a}b=e}if(!U){if(b){d=b|8192;break b}d=m[m[548]+8>>2];b=c+16|0}if(U?(g|0)==2:1){e=W[d|0](b,a)|0;h=2;if((U|0)==1){break a}a=e}if(!U){if(a){d=a|8192;break b}d=$(c+16|0,m[c+8>>2],c+7|0);a=n[c+7|0];if(!a){break b}d=a|16384}}if(!U){T=c+1040|0;return d}C()}m[m[V>>2]>>2]=h;m[V>>2]=m[V>>2]+4;e=m[V>>2];m[e>>2]=a;m[e+4>>2]=b;m[e+8>>2]=c;m[e+12>>2]=d;m[e+16>>2]=f;m[V>>2]=m[V>>2]+20;return 0}function ab(){var a=0,b=0,c=0,d=0,e=0,f=0,g=0,h=0,i=0;if((U|0)==2){m[V>>2]=m[V>>2]-24;a=m[V>>2];b=m[a>>2];c=m[a+8>>2];e=m[a+12>>2];f=m[a+16>>2];g=m[a+20>>2];a=m[a+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;h=m[m[V>>2]>>2]}if(!U){b=T-1040|0;T=b;m[b+12>>2]=0;m[b+8>>2]=0;k[b+7|0]=0;k[b+6|0]=0;c=b+12|0;e=b+8|0;a=Ua(b+528|0,c,e)}a:{b:{if(!U){if(a){break b}c=b+528|0;e=m[b+12>>2];f=m[m[548]+12>>2];a=m[b+8>>2]}if(U?!h:1){d=W[f|0](c,e)|0;if((U|0)==1){break a}c=d}if(!U){if(c){a=c|8192;break b}e=m[m[548]+8>>2];c=b+16|0}if(U?(h|0)==1:1){d=W[e|0](c,a)|0;i=1;if((U|0)==1){break a}a=d}if(!U){if(a){a=a|8192;break b}a=la(b+16|0,m[b+8>>2],b+7|0,b+6|0);g=n[b+7|0]!=0;c=n[b+6|0];if(!c){break b}a=c|16384}}if(!U){T=b+1040|0;return g?a:a?a:8}C()}m[m[V>>2]>>2]=i;m[V>>2]=m[V>>2]+4;d=m[V>>2];m[d>>2]=b;m[d+4>>2]=a;m[d+8>>2]=c;m[d+12>>2]=e;m[d+16>>2]=f;m[d+20>>2]=g;m[V>>2]=m[V>>2]+24;return 0}function qa(a){var b=0,c=0,d=0,e=0,f=0,g=0,h=0;if((U|0)==2){m[V>>2]=m[V>>2]-20;c=m[V>>2];a=m[c>>2];b=m[c+4>>2];e=m[c+12>>2];f=m[c+16>>2];c=m[c+8>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;g=m[m[V>>2]>>2]}if(!U){b=T-1056|0;T=b;m[b+1052>>2]=0;m[b+1048>>2]=0;k[b+15|0]=0;c=b+528|0;e=b+1052|0;f=b+1048|0;a=Oa(a,c,e,f)}a:{b:{if(!U){if(a){break b}c=b+528|0;e=m[b+1052>>2];f=m[m[548]+12>>2];a=m[b+1048>>2]}if(U?!g:1){d=W[f|0](c,e)|0;if((U|0)==1){break a}c=d}if(!U){if(c){a=c|8192;break b}e=m[m[548]+8>>2];c=b+16|0}if(U?(g|0)==1:1){d=W[e|0](c,a)|0;h=1;if((U|0)==1){break a}a=d}if(!U){if(a){a=a|8192;break b}a=$(b+16|0,m[b+1048>>2],b+15|0);if(a){break b}a=n[b+15|0];if(!a){a=0;break b}a=a|16384}}if(!U){T=b+1056|0;return a}C()}m[m[V>>2]>>2]=h;m[V>>2]=m[V>>2]+4;d=m[V>>2];m[d>>2]=a;m[d+4>>2]=b;m[d+8>>2]=c;m[d+12>>2]=e;m[d+16>>2]=f;m[V>>2]=m[V>>2]+20;return 0}function ka(a,b,c,d,e,f,g){var h=0,i=0,j=0,m=0,p=0,q=0,r=0;i=T-768|0;T=i;T=i+768|0;h=3;a:{if(a>>>0<7){break a}h=5;if(n[b|0]!=58){break a}h=a-1|0;b:{if(h&1){a=0;j=3;break b}j=b+1|0;q=h>>>1|0;h=0;while(1){p=h<<1;b=n[p+j|0];a=b-48|0;c:{if((a&255)>>>0<10){break c}if((b-97&255)>>>0<=5){a=b-87|0;break c}a=(b-65&255)>>>0<6?b-55|0:0}r=a<<4;b=n[j+(p|1)|0];a=b-48|0;d:{if((a&255)>>>0<10){break d}if((b-97&255)>>>0<=5){a=b-87|0;break d}a=(b-65&255)>>>0<6?b-55|0:0}k[h+i|0]=a|r;m=m+1|0;h=m&65535;if(q>>>0>h>>>0){continue}break}a=m&65535;h=n[i+4|0];b=n[i+3|0];m=n[i+2|0];q=n[i+1|0];p=n[i|0];j=0}k[c|0]=p;l[d>>1]=m&255|q<<8;l[f>>1]=h&255|b<<8;k[g|0]=n[(a+i|0)-1|0];b=o[f>>1];h=4;if((b+6|0)!=(a|0)){break a}a=j;if(b){h=0;while(1){k[e+h|0]=n[(h+i|0)+5|0];h=h+1|0;if(h>>>0<o[f>>1]){continue}break}}h=a}return h}function ca(a){var b=0,c=0,d=0,e=0,f=0,g=0,h=0,i=0;if((U|0)==2){m[V>>2]=m[V>>2]-24;b=m[V>>2];a=m[b>>2];d=m[b+8>>2];e=m[b+12>>2];f=m[b+16>>2];c=m[b+4>>2];g=m[b+20>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;h=m[m[V>>2]>>2]}if(!U){d=m[a+28>>2];c=d>>>0>=p[a+20>>2]}a:{b:{if(!U){if(c){break b}c=m[a+36>>2]}if(U?!h:1){b=W[c|0](a,0,0)|0;if((U|0)==1){break a}c=b}if(!U){c=m[a+20>>2];if(c){break b}return-1}}if(U){b=g}else{c=m[a+4>>2];d=m[a+8>>2];b=c>>>0<d>>>0}if(b|(U|0)==2){if(!U){b=c-d|0;e=b;f=b>>31;c=m[a+40>>2]}if(U?(h|0)==1:1){W[c|0](a,e,f,1)|0;i=1;if((U|0)==1){break a}}}if(!U){m[a+28>>2]=0;m[a+16>>2]=0;m[a+20>>2]=0;m[a+4>>2]=0;m[a+8>>2]=0;return 0}C()}m[m[V>>2]>>2]=i;m[V>>2]=m[V>>2]+4;b=m[V>>2];m[b>>2]=a;m[b+4>>2]=c;m[b+8>>2]=d;m[b+12>>2]=e;m[b+16>>2]=f;m[b+20>>2]=g;m[V>>2]=m[V>>2]+24;return 0}function X(a,b){var c=0,d=0,e=0,f=0;a:{b:{c:{d:{if(m[617]!=1){if(!b){break b}d=b&3;if(b-1>>>0>=3){break d}break c}e=0;if(!b){break a}c=65535;while(1){e=c>>>1&32767;f=e^-31736;d=e;e=n[a|0];c=(e^c)&1?f:d;d=c>>>1&32767;c=(c^e>>>1)&1?d^-31736:d;d=c>>>1&32767;c=(c^e>>>2)&1?d^-31736:d;d=c>>>1&32767;c=(c^e>>>3)&1?d^-31736:d;d=c>>>1&32767;c=(c^e>>>4)&1?d^-31736:d;d=c>>>1&32767;c=(c^e>>>5)&1?d^-31736:d;d=c>>>1&32767;c=(c^e>>>6)&1?d^-31736:d;d=c>>>1&32767;c=(c&1)==(e>>>7|0)?d:d^-31736;a=a+1|0;b=b-1|0;if(b){continue}break}a=c^-1;e=(a&65280)>>>8|a<<8;break a}b=b&-4;e=a;while(1){f=n[e+3|0]+(n[e+2|0]+(n[e+1|0]+(n[e|0]+c|0)|0)&65535)|0;c=f&65535;a=e+4|0;e=a;b=b-4|0;if(b){continue}break}}if(!d){break b}while(1){f=n[a|0]+c|0;c=f&65535;a=a+1|0;d=d-1|0;if(d){continue}break}}e=0-f|0}return e&65535}function Ba(a,b,c){a=a|0;b=b|0;c=c|0;var d=0,e=0,f=0,g=0,h=0,i=0,j=0;e=T-32|0;T=e;f=m[a+28>>2];m[e+16>>2]=f;d=m[a+20>>2];m[e+28>>2]=c;m[e+24>>2]=b;b=d-f|0;m[e+20>>2]=b;f=b+c|0;j=2;b=e+16|0;a:{b:{d=H(m[a+60>>2],e+16|0,2,e+12|0)|0;if(d){m[620]=d;d=-1}else{d=0}c:{if(!d){while(1){d=m[e+12>>2];if((d|0)==(f|0)){break c}if((d|0)<=-1){break b}g=m[b+4>>2];h=g>>>0<d>>>0;i=(h<<3)+b|0;g=d-(h?g:0)|0;m[i>>2]=g+m[i>>2];i=(h?12:4)+b|0;m[i>>2]=m[i>>2]-g;f=f-d|0;b=h?b+8|0:b;j=j-h|0;d=H(m[a+60>>2],b|0,j|0,e+12|0)|0;if(d){m[620]=d;d=-1}else{d=0}if(!d){continue}break}}if((f|0)!=-1){break b}}b=m[a+44>>2];m[a+28>>2]=b;m[a+20>>2]=b;m[a+16>>2]=b+m[a+48>>2];a=c;break a}m[a+28>>2]=0;m[a+16>>2]=0;m[a+20>>2]=0;m[a>>2]=m[a>>2]|32;a=0;if((j|0)==2){break a}a=c-m[b+4>>2]|0}T=e+32|0;return a|0}function ja(a){var b=0,c=0,d=0,e=0,f=0,g=0;if((U|0)==2){m[V>>2]=m[V>>2]-12;b=m[V>>2];a=m[b>>2];d=m[b+8>>2];b=m[b+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;e=m[m[V>>2]>>2]}a:{if((U|0)==2|a){b=U?b:m[a+76>>2]<=-1;if(b|(U|0)==2){if(U?!e:1){c=ca(a);if((U|0)==1){break a}a=c}if(!U){return a}}if(U?(e|0)==1:1){c=ca(a);f=1;if((U|0)==1){break a}a=c}if(!U){return a}}a=U?a:m[619];if(a|(U|0)==2){a=U?a:m[619];if(U?(e|0)==2:1){c=ja(a);f=2;if((U|0)==1){break a}b=c}}a=U?a:m[623];if(a|(U|0)==2){while(1){d=U?d:p[a+20>>2]>p[a+28>>2];if(d|(U|0)==2){g=b;if(U?(e|0)==3:1){c=ca(a);f=3;if((U|0)==1){break a}d=c}b=U?g:b|d}if(!U){a=m[a+56>>2];if(a){continue}}break}}if(!U){return b}C()}m[m[V>>2]>>2]=f;m[V>>2]=m[V>>2]+4;c=m[V>>2];m[c>>2]=a;m[c+4>>2]=b;m[c+8>>2]=d;m[V>>2]=m[V>>2]+12;return 0}function ha(a,b){var c=0;a:{if(!b){break a}c=a+b|0;k[c-1|0]=0;k[a|0]=0;if(b>>>0<3){break a}k[c-2|0]=0;k[a+1|0]=0;k[c-3|0]=0;k[a+2|0]=0;if(b>>>0<7){break a}k[c-4|0]=0;k[a+3|0]=0;if(b>>>0<9){break a}c=0-a&3;a=c+a|0;m[a>>2]=0;c=b-c&-4;b=c+a|0;m[b-4>>2]=0;if(c>>>0<9){break a}m[a+8>>2]=0;m[a+4>>2]=0;m[b-8>>2]=0;m[b-12>>2]=0;if(c>>>0<25){break a}m[a+24>>2]=0;m[a+20>>2]=0;m[a+16>>2]=0;m[a+12>>2]=0;m[b-16>>2]=0;m[b-20>>2]=0;m[b-24>>2]=0;m[b-28>>2]=0;b=c;c=a&4|24;b=b-c|0;if(b>>>0<32){break a}a=a+c|0;while(1){m[a+24>>2]=0;m[a+28>>2]=0;m[a+16>>2]=0;m[a+20>>2]=0;m[a+8>>2]=0;m[a+12>>2]=0;m[a>>2]=0;m[a+4>>2]=0;a=a+32|0;b=b-32|0;if(b>>>0>31){continue}break}}}function da(a,b){var c=0,d=0,e=0,f=0,g=0;if((U|0)==2){m[V>>2]=m[V>>2]-16;e=m[V>>2];a=m[e>>2];b=m[e+4>>2];d=m[e+8>>2];e=m[e+12>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;g=m[m[V>>2]>>2]}if(!U){e=1;f=m[618];c=!f}a:{b:{if(!U){if(m[f+76>>2]<=-1){f=m[f>>2]}else{f=m[f>>2]}if(f>>>4&1|c){break b}d=m[618]}if(U?!g:1){c=Ja(b,d);if((U|0)==1){break a}d=c}if(!U){if(!d){m[a>>2]=0;return 2}e=0;d=ga(b);if(d){while(1){c:{c=d-1|0;switch(n[c+b|0]-10|0){case 0:case 3:break c;default:break b}}d=c;if(c){continue}break}}d=0}}if(!U){m[a>>2]=d;return e}C()}m[m[V>>2]>>2]=0;m[V>>2]=m[V>>2]+4;c=m[V>>2];m[c>>2]=a;m[c+4>>2]=b;m[c+8>>2]=d;m[c+12>>2]=e;m[V>>2]=m[V>>2]+16;return 0}function Ka(a){var b=0,c=0,d=0,e=0,f=0,g=0;if((U|0)==2){m[V>>2]=m[V>>2]-16;b=m[V>>2];a=m[b>>2];e=m[b+8>>2];d=m[b+12>>2];c=m[b+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;f=m[m[V>>2]>>2]}if(!U){e=m[a+76>>2]>=0;d=m[a>>2]&1;c=!d;if(c){c=m[a+52>>2];if(c){m[c+56>>2]=m[a+56>>2]}b=m[a+56>>2];if(b){m[b+52>>2]=c}c=m[623]==(a|0);if(c){m[623]=b}}}a:{if(U?!f:1){b=ja(a);if((U|0)==1){break a}c=b}c=U?c:m[a+12>>2];if(U?(f|0)==1:1){W[c|0](a)|0;g=1;if((U|0)==1){break a}}if(!U){b=m[a+96>>2];if(b){aa(b)}b:{if(!d){aa(a);break b}if(!e){break b}}}return}m[m[V>>2]>>2]=g;m[V>>2]=m[V>>2]+4;b=m[V>>2];m[b>>2]=a;m[b+4>>2]=c;m[b+8>>2]=e;m[b+12>>2]=d;m[V>>2]=m[V>>2]+16}function La(a,b,c,d,e){var f=0,g=0,h=0,i=0,j=0,l=0,o=0;i=T-768|0;T=i;l=3;a:{if(a&1){break a}o=a>>>1|0;if(!o){break a}a=0;while(1){g=a<<1;h=n[g+b|0];f=h-48|0;b:{if((f&255)>>>0<10){break b}if((h-97&255)>>>0<=5){f=h-87|0;break b}f=(h-65&255)>>>0<6?h-55|0:0}h=f<<4;g=n[(g|1)+b|0];f=g-48|0;c:{if((f&255)>>>0<10){break c}if((g-97&255)>>>0<=5){f=g-87|0;break c}f=(g-65&255)>>>0<6?g-55|0:0}k[a+i|0]=f|h;j=j+1|0;a=j&65535;if(o>>>0>a>>>0){continue}break}a=j&65535;d:{if(a>>>0>=6){k[e|0]=n[i+5|0];break d}if((a|0)!=5){break a}}a=m[i>>2];m[c>>2]=a>>>8&65280|a>>>24|(a<<8&16711680|a<<24);k[d|0]=n[i+4|0];l=0}T=i+768|0;return l}function Ga(a){var b=0,c=0,d=0;c=T-32|0;T=c;a:{b:{c:{if(!_(1030,k[1024])){m[620]=28;break c}b=ia(1176);if(b){break b}}b=0;break a}ha(b,144);if(!_(1024,43)){m[b>>2]=n[1024]==114?8:4}d:{if(n[1024]!=97){d=m[b>>2];break d}d=F(a|0,3,0)|0;if(!(d&1024)){m[c+16>>2]=d|1024;F(a|0,4,c+16|0)|0}d=m[b>>2]|128;m[b>>2]=d}k[b+75|0]=255;m[b+48>>2]=1024;m[b+60>>2]=a;m[b+44>>2]=b+152;e:{if(d&8){break e}m[c>>2]=c+24;if(J(a|0,21523,c|0)|0){break e}k[b+75|0]=10}m[b+40>>2]=6;m[b+36>>2]=7;m[b+32>>2]=8;m[b+12>>2]=9;if(!m[625]){m[b+76>>2]=-1}m[b+56>>2]=m[623];a=m[623];if(a){m[a+52>>2]=b}m[623]=b}T=c+32|0;return b}function Z(){var a=0,b=0,c=0,d=0,e=0,f=0,g=0,h=0;if((U|0)==2){m[V>>2]=m[V>>2]-16;a=m[V>>2];b=m[a>>2];c=m[a+4>>2];d=m[a+8>>2];e=m[a+12>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;f=m[m[V>>2]>>2]}a:{if(!U){c=T-528|0;T=c;d=c+520|0;b=!Za(c,c+524|0,d)}if((U|0)==2|b){if(!U){d=m[m[548]+12>>2];b=m[c+524>>2]}g=e;if(U?!f:1){a=W[d|0](c,b)|0;if((U|0)==1){break a}b=a}e=U?g:b;if(!e|(U|0)==2){b=U?b:m[m[548]+4>>2];if(U?(f|0)==1:1){W[b|0]()|0;h=1;if((U|0)==1){break a}}}}if(!U){m[548]=0;T=c+528|0}return}m[m[V>>2]>>2]=h;m[V>>2]=m[V>>2]+4;a=m[V>>2];m[a>>2]=b;m[a+4>>2]=c;m[a+8>>2]=d;m[a+12>>2]=e;m[V>>2]=m[V>>2]+16}function za(a){var b=0,c=0,d=0,e=0,f=0,g=0,h=0;if((U|0)==2){m[V>>2]=m[V>>2]-20;b=m[V>>2];a=m[b>>2];e=m[b+4>>2];d=m[b+12>>2];f=m[b+16>>2];b=m[b+8>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;g=m[m[V>>2]>>2]}if(!U){d=T-16|0;T=d;e=-1}a:{if(U?!g:1){c=Aa(a);if((U|0)==1){break a}b=c}b:{if(!U){if(b){break b}f=m[a+32>>2];b=d+15|0}if(U?(g|0)==1:1){c=W[f|0](a,b,1)|0;h=1;if((U|0)==1){break a}a=c}if(!U){if((a|0)!=1){break b}e=n[d+15|0]}}if(!U){T=d+16|0;return e}C()}m[m[V>>2]>>2]=h;m[V>>2]=m[V>>2]+4;c=m[V>>2];m[c>>2]=a;m[c+4>>2]=e;m[c+8>>2]=b;m[c+12>>2]=d;m[c+16>>2]=f;m[V>>2]=m[V>>2]+20;return 0}function Aa(a){var b=0,c=0;if((U|0)==2){m[V>>2]=m[V>>2]-8;b=m[V>>2];a=m[b>>2];b=m[b+4>>2]}if((U|0)==2){m[V>>2]=m[V>>2]-4;c=m[m[V>>2]>>2]}a:{if(!U){b=n[a+74|0];k[a+74|0]=b|b-1;b=p[a+20>>2]>p[a+28>>2]}if((U|0)==2|b){b=U?b:m[a+36>>2];if(U?!c:1){W[b|0](a,0,0)|0;if((U|0)==1){break a}}}if(!U){m[a+28>>2]=0;m[a+16>>2]=0;m[a+20>>2]=0;b=m[a>>2];if(b&4){m[a>>2]=b|32;return-1}c=m[a+44>>2]+m[a+48>>2]|0;m[a+8>>2]=c;m[a+4>>2]=c;return b<<27>>31}C()}m[m[V>>2]>>2]=0;m[V>>2]=m[V>>2]+4;c=m[V>>2];m[c>>2]=a;m[c+4>>2]=b;m[V>>2]=m[V>>2]+8;return 0}function Ya(a,b,c,d,e,f,g){m[g>>2]=7;m[f>>2]=d+10;k[e+6|0]=b>>>8;k[e+5|0]=b;k[e+4|0]=a;a=d+3|0;k[e+3|0]=a>>>8;k[e+2|0]=a;k[e|0]=1;k[e+1|0]=57;a:{if(!d){break a}a=d&3;b=0;if(d-1>>>0>=3){g=d&65532;while(1){d=b+e|0;k[d+7|0]=n[b+c|0];k[d+8|0]=n[(b|1)+c|0];k[d+9|0]=n[(b|2)+c|0];k[d+10|0]=n[(b|3)+c|0];b=b+4|0;g=g-4|0;if(g){continue}break}}if(!a){break a}while(1){k[(b+e|0)+7|0]=n[b+c|0];b=b+1|0;a=a-1|0;if(a){continue}break}}b=m[f>>2]-3|0;a=X(e,b);k[b+e|0]=a;k[(m[f>>2]+e|0)-2|0]=a>>>8;k[(m[f>>2]+e|0)-1|0]=23;return 0}function Ra(a,b,c,d,e){var f=0,g=0,h=0;m[e>>2]=7;m[d>>2]=b+7;k[c+3|0]=b>>>8;k[c+2|0]=b;k[c|0]=1;k[c+1|0]=55;a:{if(!b){break a}f=b&3;e=0;if(b-1>>>0>=3){g=b&65532;b=0;while(1){e=b+4|0;k[e+c|0]=n[a+b|0];h=b+c|0;k[h+5|0]=n[(b|1)+a|0];k[h+6|0]=n[(b|2)+a|0];k[h+7|0]=n[(b|3)+a|0];b=e;g=g-4|0;if(g){continue}break}}if(!f){break a}while(1){k[(c+e|0)+4|0]=n[a+e|0];e=e+1|0;f=f-1|0;if(f){continue}break}}b=m[d>>2]-3|0;a=X(c,b);k[b+c|0]=a;k[(m[d>>2]+c|0)-2|0]=a>>>8;k[(m[d>>2]+c|0)-1|0]=23;return 0}function Da(a,b,c){a=a|0;b=b|0;c=c|0;var d=0,e=0,f=0,g=0;e=T-32|0;T=e;m[e+16>>2]=b;f=m[a+48>>2];m[e+20>>2]=c-((f|0)!=0);d=m[a+44>>2];m[e+28>>2]=f;m[e+24>>2]=d;f=-1;a:{b:{d=I(m[a+60>>2],e+16|0,2,e+12|0)|0;if(d){m[620]=d;d=-1}else{d=0}if(!d){f=m[e+12>>2];if((f|0)>0){break b}}m[a>>2]=m[a>>2]|f&48^16;break a}g=m[e+20>>2];if(g>>>0>=f>>>0){break a}d=m[a+44>>2];m[a+4>>2]=d;m[a+8>>2]=d+(f-g|0);if(m[a+48>>2]){m[a+4>>2]=d+1;k[(b+c|0)-1|0]=n[d|0]}f=c}T=e+32|0;return f|0}function wa(a,b){var c=0,d=0;a:{d=b&255;if(d){if(a&3){while(1){c=n[a|0];if(!c|(c|0)==(b&255)){break a}a=a+1|0;if(a&3){continue}break}}c=m[a>>2];b:{if((c^-1)&c-16843009&-2139062144){break b}d=s(d,16843009);while(1){c=c^d;if((c^-1)&c-16843009&-2139062144){break b}c=m[a+4>>2];a=a+4|0;if(!(c-16843009&(c^-1)&-2139062144)){continue}break}}while(1){c=a;d=n[c|0];if(d){a=c+1|0;if((d|0)!=(b&255)){continue}}break}return c}return ga(a)+a|0}return a}function ya(a,b){var c=0;c=(b|0)!=0;a:{b:{c:{if(!b|!(a&3)){break c}while(1){if(n[a|0]==10){break b}a=a+1|0;b=b-1|0;c=(b|0)!=0;if(!b){break c}if(a&3){continue}break}}if(!c){break a}}d:{if(n[a|0]==10|b>>>0<4){break d}while(1){c=m[a>>2]^168430090;if((c^-1)&c-16843009&-2139062144){break d}a=a+4|0;b=b-4|0;if(b>>>0>3){continue}break}}if(!b){break a}while(1){if(n[a|0]==10){return a}a=a+1|0;b=b-1|0;if(b){continue}break}}return 0}function ga(a){var b=0,c=0,d=0;a:{b:{b=a;if(!(b&3)){break b}if(!n[a|0]){return 0}while(1){b=b+1|0;if(!(b&3)){break b}if(n[b|0]){continue}break}break a}while(1){c=b;b=b+4|0;d=m[c>>2];if(!((d^-1)&d-16843009&-2139062144)){continue}break}if(!(d&255)){return c-a|0}while(1){d=n[c+1|0];b=c+1|0;c=b;if(d){continue}break}}return b-a|0}function _a(a,b,c,d,e,f){var g=0;g=3;a:{if((b|0)!=15){break a}b=n[a+1|0];if(b){k[f|0]=b;return b|16384}g=4;if(n[a|0]!=1|n[a+2|0]!=8|(n[a+3|0]|n[a+14|0]!=23)){break a}m[c>>2]=n[a+4|0]|n[a+5|0]<<8|(n[a+6|0]<<16|n[a+7|0]<<24);k[d|0]=n[a+8|0];m[e>>2]=n[a+9|0]|(n[a+10|0]<<8|n[a+11|0]<<16);k[f|0]=n[a+1|0];g=0}return g}function db(a){a=a|0;var b=0;if((U|0)==2){m[V>>2]=m[V>>2]-4;a=m[m[V>>2]>>2]}a:{if((U|0)==2){m[V>>2]=m[V>>2]-4;b=m[m[V>>2]>>2]}else{b=0}if(U?!b:1){b=ea(0,a,1);if((U|0)==1){break a}a=b}if(!U){return a|0}C()}m[m[V>>2]>>2]=0;m[V>>2]=m[V>>2]+4;m[m[V>>2]>>2]=a;m[V>>2]=m[V>>2]+4;return 0}function Xa(a){a=a|0;var b=0;if((U|0)==2){m[V>>2]=m[V>>2]-4;a=m[m[V>>2]>>2]}a:{if((U|0)==2){m[V>>2]=m[V>>2]-4;b=m[m[V>>2]>>2]}else{b=0}if(U?!b:1){b=ea(2,a,0);if((U|0)==1){break a}a=b}if(!U){return a|0}C()}m[m[V>>2]>>2]=0;m[V>>2]=m[V>>2]+4;m[m[V>>2]>>2]=a;m[V>>2]=m[V>>2]+4;return 0}function Na(a){a=a|0;var b=0;if((U|0)==2){m[V>>2]=m[V>>2]-4;a=m[m[V>>2]>>2]}a:{if((U|0)==2){m[V>>2]=m[V>>2]-4;b=m[m[V>>2]>>2]}else{b=0}if(U?!b:1){b=ea(1,a,0);if((U|0)==1){break a}a=b}if(!U){return a|0}C()}m[m[V>>2]>>2]=0;m[V>>2]=m[V>>2]+4;m[m[V>>2]>>2]=a;m[V>>2]=m[V>>2]+4;return 0}function Sa(a,b,c,d,e){var f=0;f=3;a:{if((b|0)!=11){break a}b=n[a+1|0];if(b){k[e|0]=b;return b|16384}f=4;if(n[a|0]!=1|n[a+2|0]!=4|(n[a+3|0]|n[a+10|0]!=23)){break a}l[c>>1]=n[a+4|0]|n[a+5|0]<<8;l[d>>1]=n[a+6|0]|n[a+7|0]<<8;k[e|0]=n[a+1|0];f=0}return f}function Ha(a){var b=0,c=0,d=0;b=T-16|0;T=b;a:{b:{if(!_(1026,k[1024])){m[620]=28;break b}d=Fa();m[b>>2]=438;a=K(a|0,d|32768,b|0)|0;if(a>>>0>=4294963201){m[620]=0-a;a=-1}if((a|0)<0){break a}c=Ga(a);if(c){break a}G(a|0)|0}c=0}T=b+16|0;return c}function Pa(a,b,c,d,e){var f=0;f=3;a:{if((b|0)!=9){break a}b=n[a+1|0];if(b){k[e|0]=b;return b|16384}f=4;if(n[a|0]!=1|n[a+2|0]!=2|(n[a+3|0]|n[a+8|0]!=23)){break a}k[c|0]=n[a+4|0];k[d|0]=n[a+5|0];k[e|0]=n[a+1|0];f=0}return f}function la(a,b,c,d){var e=0;e=3;a:{if((b|0)!=8){break a}b=n[a+1|0];if(b){k[d|0]=b;return b|16384}e=4;if(n[a|0]!=1|n[a+2|0]!=1|(n[a+3|0]|n[a+7|0]!=23)){break a}k[c|0]=n[a+4|0];k[d|0]=n[a+1|0];e=0}return e}function Fa(){var a=0,b=0,c=0;a=2;if(!_(1024,43)){a=n[1024]!=114}a=_(1024,120)?a|128:a;a=_(1024,101)?a|524288:a;b=a;c=a|64;a=n[1024];b=(a|0)==114?b:c;b=(a|0)==119?b|512:b;return(a|0)==97?b|1024:b}function Ma(a,b,c){var d=0,e=0,f=0;d=n[a+5|0];e=n[a+4|0];f=X(a,4);if(!(!a|(b|0)<7|n[a|0]!=1)){k[c|0]=n[a+1|0];return(d<<8|e)==(f|0)?n[((n[a+2|0]|n[a+3|0]<<8)+a|0)+6|0]==23?0:15:15}return 15}function $a(a,b,c){var d=0;m[c>>2]=15;m[b>>2]=7;k[a+3|0]=0;k[a+2|0]=0;k[a|0]=1;k[a+1|0]=56;d=m[b>>2]-3|0;c=X(a,d);k[a+d|0]=c;k[(m[b>>2]+a|0)-2|0]=c>>>8;k[(m[b>>2]+a|0)-1|0]=23;return 0}function Wa(a,b,c,d,e){m[e>>2]=8;m[d>>2]=10;k[c+6|0]=b>>>8;k[c+5|0]=b;k[c+4|0]=a;k[c|0]=1;k[c+1|0]=58;k[c+2|0]=3;k[c+3|0]=0;a=X(c,7);k[c+9|0]=23;k[c+7|0]=a;k[c+8|0]=a>>>8;return 0}function Va(a,b,c,d,e){m[e>>2]=7;m[d>>2]=10;k[c+6|0]=b>>>8;k[c+5|0]=b;k[c+4|0]=a;k[c|0]=1;k[c+1|0]=52;k[c+2|0]=3;k[c+3|0]=0;a=X(c,7);k[c+9|0]=23;k[c+7|0]=a;k[c+8|0]=a>>>8;return 0}function Y(a){var b=0,c=0;b=m[264];c=a+3&-4;a=b+c|0;a:{if(a>>>0<=b>>>0?(c|0)>=1:0){break a}if(a>>>0>jb()<<16>>>0){if(!(Q(a|0)|0)){break a}}m[264]=a;return b}m[620]=48;return-1}function $(a,b,c){var d=0;d=3;a:{if((b|0)!=7){break a}b=n[a+1|0];if(b){k[c|0]=b;return b|16384}d=4;if(n[a+2|0]|n[a|0]!=1|(n[a+3|0]|n[a+6|0]!=23)){break a}d=0;k[c|0]=0}return d}function Ca(a,b,c,d){a=a|0;b=b|0;c=c|0;d=d|0;var e=0;e=T-16|0;T=e;a=O(m[a+60>>2],b|0,c|0,d&255,e+8|0)|0;d=0;if(a){m[620]=a;d=-1}T=e+16|0;return(d?-1:m[e+8>>2])|0}function Ta(a,b,c,d){m[d>>2]=11;m[c>>2]=8;k[b+4|0]=a;k[b|0]=1;k[b+1|0]=50;k[b+2|0]=1;k[b+3|0]=0;a=X(b,5);k[b+7|0]=23;k[b+5|0]=a;k[b+6|0]=a>>>8;return 0}function Qa(a,b,c,d){m[d>>2]=9;m[c>>2]=8;k[b+4|0]=a;k[b|0]=1;k[b+1|0]=51;k[b+2|0]=1;k[b+3|0]=0;a=X(b,5);k[b+7|0]=23;k[b+5|0]=a;k[b+6|0]=a>>>8;return 0}function Oa(a,b,c,d){m[d>>2]=7;m[c>>2]=8;k[b+4|0]=a;k[b|0]=1;k[b+1|0]=54;k[b+2|0]=1;k[b+3|0]=0;a=X(b,5);k[b+7|0]=23;k[b+5|0]=a;k[b+6|0]=a>>>8;return 0}function Za(a,b,c){m[c>>2]=7;m[b>>2]=7;k[a|0]=1;k[a+1|0]=59;k[a+2|0]=0;k[a+3|0]=0;b=X(a,4);k[a+6|0]=23;k[a+4|0]=b;k[a+5|0]=b>>>8;return 0}function Ua(a,b,c){m[c>>2]=8;m[b>>2]=7;k[a|0]=1;k[a+1|0]=49;k[a+2|0]=0;k[a+3|0]=0;b=X(a,4);k[a+6|0]=23;k[a+4|0]=b;k[a+5|0]=b>>>8;return 0}function eb(a){var b=0;b=a&31;a=0-a&31;return(-1>>>b&-2)<<b|(-1<<a&-2)>>>a}



function ra(a){a=a|0;U=1;V=a;if(p[V>>2]>p[V+4>>2]){C()}}function pa(a){a=a|0;U=2;V=a;if(p[V>>2]>p[V+4>>2]){C()}}function _(a,b){a=wa(a,b);return n[a|0]==(b&255)?a:0}function sa(a){a=a|0;a=T-a&-16;T=a;return a|0}function oa(){U=0;if(p[V>>2]>p[V+4>>2]){C()}}function Ea(a){a=a|0;return G(m[a+60>>2])|0}function Ia(){return 2480}function ua(){return T|0}function ta(a){a=a|0;T=a}function ma(){}
// EMSCRIPTEN_END_FUNCS
a=n;hb(rb);var W=fb([null,S,R,N,M,L,Ca,Ba,Da,Ea]);function jb(){return j.byteLength/65536|0}return{"p":ma,"q":db,"r":Xa,"s":Na,"t":W,"u":Ia,"v":aa,"w":ia,"x":ua,"y":ta,"z":sa,"A":ra,"B":oa,"C":pa,"D":oa}}return ib(kb)}


// EMSCRIPTEN_END_ASM




)(asmLibraryArg)},instantiate:function(binary,info){return{then:function(ok){var module=new WebAssembly.Module(binary);ok({"instance":new WebAssembly.Instance(module)})}}},RuntimeError:Error};wasmBinary=[];if(typeof WebAssembly!=="object"){abort("no native wasm support detected")}var wasmMemory;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort("Assertion failed: "+text)}}function getCFunc(ident){var func=Module["_"+ident];assert(func,"Cannot call unknown function "+ident+", make sure it is exported");return func}function ccall(ident,returnType,argTypes,args,opts){var toC={"string":function(str){var ret=0;if(str!==null&&str!==undefined&&str!==0){var len=(str.length<<2)+1;ret=stackAlloc(len);stringToUTF8(str,ret,len)}return ret},"array":function(arr){var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType==="string")return UTF8ToString(ret);if(returnType==="boolean")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);var asyncMode=opts&&opts.async;var runningAsync=typeof Asyncify==="object"&&Asyncify.currData;var prevRunningAsync=typeof Asyncify==="object"&&Asyncify.asyncFinalizers.length>0;if(runningAsync&&!prevRunningAsync){return new Promise(function(resolve){Asyncify.asyncFinalizers.push(function(ret){if(stack!==0)stackRestore(stack);resolve(convertReturnValue(ret))})})}ret=convertReturnValue(ret);if(stack!==0)stackRestore(stack);if(opts&&opts.async)return Promise.resolve(ret);return ret}var UTF8Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):undefined;function UTF8ArrayToString(heap,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heap[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heap.subarray&&UTF8Decoder){return UTF8Decoder.decode(heap.subarray(idx,endPtr))}else{var str="";while(idx<endPtr){var u0=heap[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heap[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heap[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heap[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):""}function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite)}function lengthBytesUTF8(str){var len=0;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343)u=65536+((u&1023)<<10)|str.charCodeAt(++i)&1023;if(u<=127)++len;else if(u<=2047)len+=2;else if(u<=65535)len+=3;else len+=4}return len}function writeArrayToMemory(array,buffer){HEAP8.set(array,buffer)}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module["HEAP8"]=HEAP8=new Int8Array(buf);Module["HEAP16"]=HEAP16=new Int16Array(buf);Module["HEAP32"]=HEAP32=new Int32Array(buf);Module["HEAPU8"]=HEAPU8=new Uint8Array(buf);Module["HEAPU16"]=HEAPU16=new Uint16Array(buf);Module["HEAPU32"]=HEAPU32=new Uint32Array(buf);Module["HEAPF32"]=HEAPF32=new Float32Array(buf);Module["HEAPF64"]=HEAPF64=new Float64Array(buf)}var INITIAL_MEMORY=Module["INITIAL_MEMORY"]||16777216;if(Module["wasmMemory"]){wasmMemory=Module["wasmMemory"]}else{wasmMemory=new WebAssembly.Memory({"initial":INITIAL_MEMORY/65536,"maximum":INITIAL_MEMORY/65536})}if(wasmMemory){buffer=wasmMemory.buffer}INITIAL_MEMORY=buffer.byteLength;updateGlobalBufferAndViews(buffer);var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;__ATINIT__.push({func:function(){___wasm_call_ctors()}});function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;if(!Module["noFSInit"]&&!FS.init.initialized)FS.init();TTY.init();callRuntimeCallbacks(__ATINIT__)}function preMain(){FS.ignorePermissions=false;callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function getUniqueRunDependency(id){return id}function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module["preloadedImages"]={};Module["preloadedAudios"]={};function abort(what){if(Module["onAbort"]){Module["onAbort"](what)}what+="";err(what);ABORT=true;EXITSTATUS=1;what="abort("+what+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(what);throw e}function hasPrefix(str,prefix){return String.prototype.startsWith?str.startsWith(prefix):str.indexOf(prefix)===0}var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return hasPrefix(filename,dataURIPrefix)}var fileURIPrefix="file://";function isFileURI(filename){return hasPrefix(filename,fileURIPrefix)}var wasmBinaryFile="cybtldr.wasm";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinary(file){try{if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}var binary=tryParseAsDataURI(file);if(binary){return binary}if(readBinary){return readBinary(file)}else{throw"both async and sync fetching of the wasm failed"}}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch==="function"&&!isFileURI(wasmBinaryFile)){return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){if(!response["ok"]){throw"failed to load wasm binary file at '"+wasmBinaryFile+"'"}return response["arrayBuffer"]()}).catch(function(){return getBinary(wasmBinaryFile)})}else{if(readAsync){return new Promise(function(resolve,reject){readAsync(wasmBinaryFile,function(response){resolve(new Uint8Array(response))},reject)})}}}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}function createWasm(){var info={"a":asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;exports=Asyncify.instrumentWasmExports(exports);Module["asm"]=exports;wasmTable=Module["asm"]["t"];removeRunDependency("wasm-instantiate")}addRunDependency("wasm-instantiate");function receiveInstantiatedSource(output){receiveInstance(output["instance"])}function instantiateArrayBuffer(receiver){return getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(receiver,function(reason){err("failed to asynchronously prepare wasm: "+reason);abort(reason)})}function instantiateAsync(){if(!wasmBinary&&typeof WebAssembly.instantiateStreaming==="function"&&!isDataURI(wasmBinaryFile)&&!isFileURI(wasmBinaryFile)&&typeof fetch==="function"){return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,info);return result.then(receiveInstantiatedSource,function(reason){err("wasm streaming compile failed: "+reason);err("falling back to ArrayBuffer instantiation");return instantiateArrayBuffer(receiveInstantiatedSource)})})}else{return instantiateArrayBuffer(receiveInstantiatedSource)}}if(Module["instantiateWasm"]){try{var exports=Module["instantiateWasm"](info,receiveInstance);exports=Asyncify.instrumentWasmExports(exports);return exports}catch(e){err("Module.instantiateWasm callback failed with error: "+e);return false}}instantiateAsync();return{}}var tempDouble;var tempI64;function WebHidCloseConnection(){return Asyncify.handleAsync(async()=>{try{await Module.activeDevice._close();return 0}catch(ex){Module.activeDevice._message(`HID close failed: ${ex.message}`);return 1}})}function WebHidOpenConnection(){return Asyncify.handleAsync(async()=>{try{await Module.activeDevice._open();return 0}catch(ex){Module.activeDevice._message(`HID open failed: ${ex.message}`);return 1}})}function WebHidProgressUpdate(arrayId,rowNum){Module.activeDevice._message(`HID write progress: array ${arrayId} row ${rowNum}`)}function WebHidReadData(bufPtr,bufSize){return Asyncify.handleAsync(async()=>{try{let buf=await Module.activeDevice._read();Module.HEAPU8.set(buf.subarray(0,bufSize),bufPtr);return 0}catch(ex){Module.activeDevice._message(`HID read failed: ${ex.message}`);return 1}})}function WebHidWriteData(bufPtr,bufSize){return Asyncify.handleAsync(async()=>{try{let buf=Module.HEAPU8.subarray(bufPtr,bufPtr+bufSize);await Module.activeDevice._write(buf);return 0}catch(ex){Module.activeDevice._message(`HID write failed: ${ex.message}`);return 1}})}function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback=="function"){callback(Module);continue}var func=callback.func;if(typeof func==="number"){if(callback.arg===undefined){(function(){dynCall_v.call(null,func)})()}else{(function(a1){dynCall_vi.apply(null,[func,a1])})(callback.arg)}}else{func(callback.arg===undefined?null:callback.arg)}}}function setErrNo(value){HEAP32[___errno_location()>>2]=value;return value}var PATH={splitPath:function(filename){var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:function(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift("..")}}return parts},normalize:function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.substr(-1)==="/";path=PATH.normalizeArray(path.split("/").filter(function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path},dirname:function(path){var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:function(path){if(path==="/")return"/";path=PATH.normalize(path);path=path.replace(/\/$/,"");var lastSlash=path.lastIndexOf("/");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},extname:function(path){return PATH.splitPath(path)[3]},join:function(){var paths=Array.prototype.slice.call(arguments,0);return PATH.normalize(paths.join("/"))},join2:function(l,r){return PATH.normalize(l+"/"+r)}};function getRandomDevice(){if(typeof crypto==="object"&&typeof crypto["getRandomValues"]==="function"){var randomBuffer=new Uint8Array(1);return function(){crypto.getRandomValues(randomBuffer);return randomBuffer[0]}}else if(ENVIRONMENT_IS_NODE){try{var crypto_module=require("crypto");return function(){return crypto_module["randomBytes"](1)[0]}}catch(e){}}return function(){abort("randomDevice")}}var PATH_FS={resolve:function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:FS.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){return""}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=PATH.normalizeArray(resolvedPath.split("/").filter(function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."},relative:function(from,to){from=PATH_FS.resolve(from).substr(1);to=PATH_FS.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")}};var TTY={ttys:[],init:function(){},shutdown:function(){},register:function(dev,ops){TTY.ttys[dev]={input:[],output:[],ops:ops};FS.registerDevice(dev,TTY.stream_ops)},stream_ops:{open:function(stream){var tty=TTY.ttys[stream.node.rdev];if(!tty){throw new FS.ErrnoError(43)}stream.tty=tty;stream.seekable=false},close:function(stream){stream.tty.ops.flush(stream.tty)},flush:function(stream){stream.tty.ops.flush(stream.tty)},read:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.get_char){throw new FS.ErrnoError(60)}var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=stream.tty.ops.get_char(stream.tty)}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.put_char){throw new FS.ErrnoError(60)}try{for(var i=0;i<length;i++){stream.tty.ops.put_char(stream.tty,buffer[offset+i])}}catch(e){throw new FS.ErrnoError(29)}if(length){stream.node.timestamp=Date.now()}return i}},default_tty_ops:{get_char:function(tty){if(!tty.input.length){var result=null;if(ENVIRONMENT_IS_NODE){var BUFSIZE=256;var buf=Buffer.alloc?Buffer.alloc(BUFSIZE):new Buffer(BUFSIZE);var bytesRead=0;try{bytesRead=nodeFS.readSync(process.stdin.fd,buf,0,BUFSIZE,null)}catch(e){if(e.toString().indexOf("EOF")!=-1)bytesRead=0;else throw e}if(bytesRead>0){result=buf.slice(0,bytesRead).toString("utf-8")}else{result=null}}else if(typeof window!="undefined"&&typeof window.prompt=="function"){result=window.prompt("Input: ");if(result!==null){result+="\n"}}else if(typeof readline=="function"){result=readline();if(result!==null){result+="\n"}}if(!result){return null}tty.input=intArrayFromString(result,true)}return tty.input.shift()},put_char:function(tty,val){if(val===null||val===10){out(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},flush:function(tty){if(tty.output&&tty.output.length>0){out(UTF8ArrayToString(tty.output,0));tty.output=[]}}},default_tty1_ops:{put_char:function(tty,val){if(val===null||val===10){err(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},flush:function(tty){if(tty.output&&tty.output.length>0){err(UTF8ArrayToString(tty.output,0));tty.output=[]}}}};function mmapAlloc(size){var alignedSize=alignMemory(size,16384);var ptr=_malloc(alignedSize);while(size<alignedSize)HEAP8[ptr+size++]=0;return ptr}var MEMFS={ops_table:null,mount:function(mount){return MEMFS.createNode(null,"/",16384|511,0)},createNode:function(parent,name,mode,dev){if(FS.isBlkdev(mode)||FS.isFIFO(mode)){throw new FS.ErrnoError(63)}if(!MEMFS.ops_table){MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}}}var node=FS.createNode(parent,name,mode,dev);if(FS.isDir(node.mode)){node.node_ops=MEMFS.ops_table.dir.node;node.stream_ops=MEMFS.ops_table.dir.stream;node.contents={}}else if(FS.isFile(node.mode)){node.node_ops=MEMFS.ops_table.file.node;node.stream_ops=MEMFS.ops_table.file.stream;node.usedBytes=0;node.contents=null}else if(FS.isLink(node.mode)){node.node_ops=MEMFS.ops_table.link.node;node.stream_ops=MEMFS.ops_table.link.stream}else if(FS.isChrdev(node.mode)){node.node_ops=MEMFS.ops_table.chrdev.node;node.stream_ops=MEMFS.ops_table.chrdev.stream}node.timestamp=Date.now();if(parent){parent.contents[name]=node;parent.timestamp=node.timestamp}return node},getFileDataAsTypedArray:function(node){if(!node.contents)return new Uint8Array(0);if(node.contents.subarray)return node.contents.subarray(0,node.usedBytes);return new Uint8Array(node.contents)},expandFileStorage:function(node,newCapacity){var prevCapacity=node.contents?node.contents.length:0;if(prevCapacity>=newCapacity)return;var CAPACITY_DOUBLING_MAX=1024*1024;newCapacity=Math.max(newCapacity,prevCapacity*(prevCapacity<CAPACITY_DOUBLING_MAX?2:1.125)>>>0);if(prevCapacity!=0)newCapacity=Math.max(newCapacity,256);var oldContents=node.contents;node.contents=new Uint8Array(newCapacity);if(node.usedBytes>0)node.contents.set(oldContents.subarray(0,node.usedBytes),0)},resizeFileStorage:function(node,newSize){if(node.usedBytes==newSize)return;if(newSize==0){node.contents=null;node.usedBytes=0}else{var oldContents=node.contents;node.contents=new Uint8Array(newSize);if(oldContents){node.contents.set(oldContents.subarray(0,Math.min(newSize,node.usedBytes)))}node.usedBytes=newSize}},node_ops:{getattr:function(node){var attr={};attr.dev=FS.isChrdev(node.mode)?node.id:1;attr.ino=node.id;attr.mode=node.mode;attr.nlink=1;attr.uid=0;attr.gid=0;attr.rdev=node.rdev;if(FS.isDir(node.mode)){attr.size=4096}else if(FS.isFile(node.mode)){attr.size=node.usedBytes}else if(FS.isLink(node.mode)){attr.size=node.link.length}else{attr.size=0}attr.atime=new Date(node.timestamp);attr.mtime=new Date(node.timestamp);attr.ctime=new Date(node.timestamp);attr.blksize=4096;attr.blocks=Math.ceil(attr.size/attr.blksize);return attr},setattr:function(node,attr){if(attr.mode!==undefined){node.mode=attr.mode}if(attr.timestamp!==undefined){node.timestamp=attr.timestamp}if(attr.size!==undefined){MEMFS.resizeFileStorage(node,attr.size)}},lookup:function(parent,name){throw FS.genericErrors[44]},mknod:function(parent,name,mode,dev){return MEMFS.createNode(parent,name,mode,dev)},rename:function(old_node,new_dir,new_name){if(FS.isDir(old_node.mode)){var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(new_node){for(var i in new_node.contents){throw new FS.ErrnoError(55)}}}delete old_node.parent.contents[old_node.name];old_node.parent.timestamp=Date.now();old_node.name=new_name;new_dir.contents[new_name]=old_node;new_dir.timestamp=old_node.parent.timestamp;old_node.parent=new_dir},unlink:function(parent,name){delete parent.contents[name];parent.timestamp=Date.now()},rmdir:function(parent,name){var node=FS.lookupNode(parent,name);for(var i in node.contents){throw new FS.ErrnoError(55)}delete parent.contents[name];parent.timestamp=Date.now()},readdir:function(node){var entries=[".",".."];for(var key in node.contents){if(!node.contents.hasOwnProperty(key)){continue}entries.push(key)}return entries},symlink:function(parent,newname,oldpath){var node=MEMFS.createNode(parent,newname,511|40960,0);node.link=oldpath;return node},readlink:function(node){if(!FS.isLink(node.mode)){throw new FS.ErrnoError(28)}return node.link}},stream_ops:{read:function(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=stream.node.usedBytes)return 0;var size=Math.min(stream.node.usedBytes-position,length);if(size>8&&contents.subarray){buffer.set(contents.subarray(position,position+size),offset)}else{for(var i=0;i<size;i++)buffer[offset+i]=contents[position+i]}return size},write:function(stream,buffer,offset,length,position,canOwn){if(!length)return 0;var node=stream.node;node.timestamp=Date.now();if(buffer.subarray&&(!node.contents||node.contents.subarray)){if(canOwn){node.contents=buffer.subarray(offset,offset+length);node.usedBytes=length;return length}else if(node.usedBytes===0&&position===0){node.contents=buffer.slice(offset,offset+length);node.usedBytes=length;return length}else if(position+length<=node.usedBytes){node.contents.set(buffer.subarray(offset,offset+length),position);return length}}MEMFS.expandFileStorage(node,position+length);if(node.contents.subarray&&buffer.subarray){node.contents.set(buffer.subarray(offset,offset+length),position)}else{for(var i=0;i<length;i++){node.contents[position+i]=buffer[offset+i]}}node.usedBytes=Math.max(node.usedBytes,position+length);return length},llseek:function(stream,offset,whence){var position=offset;if(whence===1){position+=stream.position}else if(whence===2){if(FS.isFile(stream.node.mode)){position+=stream.node.usedBytes}}if(position<0){throw new FS.ErrnoError(28)}return position},allocate:function(stream,offset,length){MEMFS.expandFileStorage(stream.node,offset+length);stream.node.usedBytes=Math.max(stream.node.usedBytes,offset+length)},mmap:function(stream,address,length,position,prot,flags){if(address!==0){throw new FS.ErrnoError(28)}if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}var ptr;var allocated;var contents=stream.node.contents;if(!(flags&2)&&contents.buffer===buffer){allocated=false;ptr=contents.byteOffset}else{if(position>0||position+length<contents.length){if(contents.subarray){contents=contents.subarray(position,position+length)}else{contents=Array.prototype.slice.call(contents,position,position+length)}}allocated=true;ptr=mmapAlloc(length);if(!ptr){throw new FS.ErrnoError(48)}HEAP8.set(contents,ptr)}return{ptr:ptr,allocated:allocated}},msync:function(stream,buffer,offset,length,mmapFlags){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}if(mmapFlags&2){return 0}var bytesWritten=MEMFS.stream_ops.write(stream,buffer,0,length,offset,false);return 0}}};var FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:false,ignorePermissions:true,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(path,opts){path=PATH_FS.resolve(FS.cwd(),path);opts=opts||{};if(!path)return{path:"",node:null};var defaults={follow_mount:true,recurse_count:0};for(var key in defaults){if(opts[key]===undefined){opts[key]=defaults[key]}}if(opts.recurse_count>8){throw new FS.ErrnoError(32)}var parts=PATH.normalizeArray(path.split("/").filter(function(p){return!!p}),false);var current=FS.root;var current_path="/";for(var i=0;i<parts.length;i++){var islast=i===parts.length-1;if(islast&&opts.parent){break}current=FS.lookupNode(current,parts[i]);current_path=PATH.join2(current_path,parts[i]);if(FS.isMountpoint(current)){if(!islast||islast&&opts.follow_mount){current=current.mounted.root}}if(!islast||opts.follow){var count=0;while(FS.isLink(current.mode)){var link=FS.readlink(current_path);current_path=PATH_FS.resolve(PATH.dirname(current_path),link);var lookup=FS.lookupPath(current_path,{recurse_count:opts.recurse_count});current=lookup.node;if(count++>40){throw new FS.ErrnoError(32)}}}}return{path:current_path,node:current}},getPath:function(node){var path;while(true){if(FS.isRoot(node)){var mount=node.mount.mountpoint;if(!path)return mount;return mount[mount.length-1]!=="/"?mount+"/"+path:mount+path}path=path?node.name+"/"+path:node.name;node=node.parent}},hashName:function(parentid,name){var hash=0;for(var i=0;i<name.length;i++){hash=(hash<<5)-hash+name.charCodeAt(i)|0}return(parentid+hash>>>0)%FS.nameTable.length},hashAddNode:function(node){var hash=FS.hashName(node.parent.id,node.name);node.name_next=FS.nameTable[hash];FS.nameTable[hash]=node},hashRemoveNode:function(node){var hash=FS.hashName(node.parent.id,node.name);if(FS.nameTable[hash]===node){FS.nameTable[hash]=node.name_next}else{var current=FS.nameTable[hash];while(current){if(current.name_next===node){current.name_next=node.name_next;break}current=current.name_next}}},lookupNode:function(parent,name){var errCode=FS.mayLookup(parent);if(errCode){throw new FS.ErrnoError(errCode,parent)}var hash=FS.hashName(parent.id,name);for(var node=FS.nameTable[hash];node;node=node.name_next){var nodeName=node.name;if(node.parent.id===parent.id&&nodeName===name){return node}}return FS.lookup(parent,name)},createNode:function(parent,name,mode,rdev){var node=new FS.FSNode(parent,name,mode,rdev);FS.hashAddNode(node);return node},destroyNode:function(node){FS.hashRemoveNode(node)},isRoot:function(node){return node===node.parent},isMountpoint:function(node){return!!node.mounted},isFile:function(mode){return(mode&61440)===32768},isDir:function(mode){return(mode&61440)===16384},isLink:function(mode){return(mode&61440)===40960},isChrdev:function(mode){return(mode&61440)===8192},isBlkdev:function(mode){return(mode&61440)===24576},isFIFO:function(mode){return(mode&61440)===4096},isSocket:function(mode){return(mode&49152)===49152},flagModes:{"r":0,"r+":2,"w":577,"w+":578,"a":1089,"a+":1090},modeStringToFlags:function(str){var flags=FS.flagModes[str];if(typeof flags==="undefined"){throw new Error("Unknown file open mode: "+str)}return flags},flagsToPermissionString:function(flag){var perms=["r","w","rw"][flag&3];if(flag&512){perms+="w"}return perms},nodePermissions:function(node,perms){if(FS.ignorePermissions){return 0}if(perms.indexOf("r")!==-1&&!(node.mode&292)){return 2}else if(perms.indexOf("w")!==-1&&!(node.mode&146)){return 2}else if(perms.indexOf("x")!==-1&&!(node.mode&73)){return 2}return 0},mayLookup:function(dir){var errCode=FS.nodePermissions(dir,"x");if(errCode)return errCode;if(!dir.node_ops.lookup)return 2;return 0},mayCreate:function(dir,name){try{var node=FS.lookupNode(dir,name);return 20}catch(e){}return FS.nodePermissions(dir,"wx")},mayDelete:function(dir,name,isdir){var node;try{node=FS.lookupNode(dir,name)}catch(e){return e.errno}var errCode=FS.nodePermissions(dir,"wx");if(errCode){return errCode}if(isdir){if(!FS.isDir(node.mode)){return 54}if(FS.isRoot(node)||FS.getPath(node)===FS.cwd()){return 10}}else{if(FS.isDir(node.mode)){return 31}}return 0},mayOpen:function(node,flags){if(!node){return 44}if(FS.isLink(node.mode)){return 32}else if(FS.isDir(node.mode)){if(FS.flagsToPermissionString(flags)!=="r"||flags&512){return 31}}return FS.nodePermissions(node,FS.flagsToPermissionString(flags))},MAX_OPEN_FDS:4096,nextfd:function(fd_start,fd_end){fd_start=fd_start||0;fd_end=fd_end||FS.MAX_OPEN_FDS;for(var fd=fd_start;fd<=fd_end;fd++){if(!FS.streams[fd]){return fd}}throw new FS.ErrnoError(33)},getStream:function(fd){return FS.streams[fd]},createStream:function(stream,fd_start,fd_end){if(!FS.FSStream){FS.FSStream=function(){};FS.FSStream.prototype={object:{get:function(){return this.node},set:function(val){this.node=val}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}}var newStream=new FS.FSStream;for(var p in stream){newStream[p]=stream[p]}stream=newStream;var fd=FS.nextfd(fd_start,fd_end);stream.fd=fd;FS.streams[fd]=stream;return stream},closeStream:function(fd){FS.streams[fd]=null},chrdev_stream_ops:{open:function(stream){var device=FS.getDevice(stream.node.rdev);stream.stream_ops=device.stream_ops;if(stream.stream_ops.open){stream.stream_ops.open(stream)}},llseek:function(){throw new FS.ErrnoError(70)}},major:function(dev){return dev>>8},minor:function(dev){return dev&255},makedev:function(ma,mi){return ma<<8|mi},registerDevice:function(dev,ops){FS.devices[dev]={stream_ops:ops}},getDevice:function(dev){return FS.devices[dev]},getMounts:function(mount){var mounts=[];var check=[mount];while(check.length){var m=check.pop();mounts.push(m);check.push.apply(check,m.mounts)}return mounts},syncfs:function(populate,callback){if(typeof populate==="function"){callback=populate;populate=false}FS.syncFSRequests++;if(FS.syncFSRequests>1){err("warning: "+FS.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work")}var mounts=FS.getMounts(FS.root.mount);var completed=0;function doCallback(errCode){FS.syncFSRequests--;return callback(errCode)}function done(errCode){if(errCode){if(!done.errored){done.errored=true;return doCallback(errCode)}return}if(++completed>=mounts.length){doCallback(null)}}mounts.forEach(function(mount){if(!mount.type.syncfs){return done(null)}mount.type.syncfs(mount,populate,done)})},mount:function(type,opts,mountpoint){var root=mountpoint==="/";var pseudo=!mountpoint;var node;if(root&&FS.root){throw new FS.ErrnoError(10)}else if(!root&&!pseudo){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});mountpoint=lookup.path;node=lookup.node;if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}if(!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}}var mount={type:type,opts:opts,mountpoint:mountpoint,mounts:[]};var mountRoot=type.mount(mount);mountRoot.mount=mount;mount.root=mountRoot;if(root){FS.root=mountRoot}else if(node){node.mounted=mount;if(node.mount){node.mount.mounts.push(mount)}}return mountRoot},unmount:function(mountpoint){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});if(!FS.isMountpoint(lookup.node)){throw new FS.ErrnoError(28)}var node=lookup.node;var mount=node.mounted;var mounts=FS.getMounts(mount);Object.keys(FS.nameTable).forEach(function(hash){var current=FS.nameTable[hash];while(current){var next=current.name_next;if(mounts.indexOf(current.mount)!==-1){FS.destroyNode(current)}current=next}});node.mounted=null;var idx=node.mount.mounts.indexOf(mount);node.mount.mounts.splice(idx,1)},lookup:function(parent,name){return parent.node_ops.lookup(parent,name)},mknod:function(path,mode,dev){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);if(!name||name==="."||name===".."){throw new FS.ErrnoError(28)}var errCode=FS.mayCreate(parent,name);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.mknod){throw new FS.ErrnoError(63)}return parent.node_ops.mknod(parent,name,mode,dev)},create:function(path,mode){mode=mode!==undefined?mode:438;mode&=4095;mode|=32768;return FS.mknod(path,mode,0)},mkdir:function(path,mode){mode=mode!==undefined?mode:511;mode&=511|512;mode|=16384;return FS.mknod(path,mode,0)},mkdirTree:function(path,mode){var dirs=path.split("/");var d="";for(var i=0;i<dirs.length;++i){if(!dirs[i])continue;d+="/"+dirs[i];try{FS.mkdir(d,mode)}catch(e){if(e.errno!=20)throw e}}},mkdev:function(path,mode,dev){if(typeof dev==="undefined"){dev=mode;mode=438}mode|=8192;return FS.mknod(path,mode,dev)},symlink:function(oldpath,newpath){if(!PATH_FS.resolve(oldpath)){throw new FS.ErrnoError(44)}var lookup=FS.lookupPath(newpath,{parent:true});var parent=lookup.node;if(!parent){throw new FS.ErrnoError(44)}var newname=PATH.basename(newpath);var errCode=FS.mayCreate(parent,newname);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.symlink){throw new FS.ErrnoError(63)}return parent.node_ops.symlink(parent,newname,oldpath)},rename:function(old_path,new_path){var old_dirname=PATH.dirname(old_path);var new_dirname=PATH.dirname(new_path);var old_name=PATH.basename(old_path);var new_name=PATH.basename(new_path);var lookup,old_dir,new_dir;lookup=FS.lookupPath(old_path,{parent:true});old_dir=lookup.node;lookup=FS.lookupPath(new_path,{parent:true});new_dir=lookup.node;if(!old_dir||!new_dir)throw new FS.ErrnoError(44);if(old_dir.mount!==new_dir.mount){throw new FS.ErrnoError(75)}var old_node=FS.lookupNode(old_dir,old_name);var relative=PATH_FS.relative(old_path,new_dirname);if(relative.charAt(0)!=="."){throw new FS.ErrnoError(28)}relative=PATH_FS.relative(new_path,old_dirname);if(relative.charAt(0)!=="."){throw new FS.ErrnoError(55)}var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(old_node===new_node){return}var isdir=FS.isDir(old_node.mode);var errCode=FS.mayDelete(old_dir,old_name,isdir);if(errCode){throw new FS.ErrnoError(errCode)}errCode=new_node?FS.mayDelete(new_dir,new_name,isdir):FS.mayCreate(new_dir,new_name);if(errCode){throw new FS.ErrnoError(errCode)}if(!old_dir.node_ops.rename){throw new FS.ErrnoError(63)}if(FS.isMountpoint(old_node)||new_node&&FS.isMountpoint(new_node)){throw new FS.ErrnoError(10)}if(new_dir!==old_dir){errCode=FS.nodePermissions(old_dir,"w");if(errCode){throw new FS.ErrnoError(errCode)}}try{if(FS.trackingDelegate["willMovePath"]){FS.trackingDelegate["willMovePath"](old_path,new_path)}}catch(e){err("FS.trackingDelegate['willMovePath']('"+old_path+"', '"+new_path+"') threw an exception: "+e.message)}FS.hashRemoveNode(old_node);try{old_dir.node_ops.rename(old_node,new_dir,new_name)}catch(e){throw e}finally{FS.hashAddNode(old_node)}try{if(FS.trackingDelegate["onMovePath"])FS.trackingDelegate["onMovePath"](old_path,new_path)}catch(e){err("FS.trackingDelegate['onMovePath']('"+old_path+"', '"+new_path+"') threw an exception: "+e.message)}},rmdir:function(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,true);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.rmdir){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}try{if(FS.trackingDelegate["willDeletePath"]){FS.trackingDelegate["willDeletePath"](path)}}catch(e){err("FS.trackingDelegate['willDeletePath']('"+path+"') threw an exception: "+e.message)}parent.node_ops.rmdir(parent,name);FS.destroyNode(node);try{if(FS.trackingDelegate["onDeletePath"])FS.trackingDelegate["onDeletePath"](path)}catch(e){err("FS.trackingDelegate['onDeletePath']('"+path+"') threw an exception: "+e.message)}},readdir:function(path){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;if(!node.node_ops.readdir){throw new FS.ErrnoError(54)}return node.node_ops.readdir(node)},unlink:function(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,false);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.unlink){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}try{if(FS.trackingDelegate["willDeletePath"]){FS.trackingDelegate["willDeletePath"](path)}}catch(e){err("FS.trackingDelegate['willDeletePath']('"+path+"') threw an exception: "+e.message)}parent.node_ops.unlink(parent,name);FS.destroyNode(node);try{if(FS.trackingDelegate["onDeletePath"])FS.trackingDelegate["onDeletePath"](path)}catch(e){err("FS.trackingDelegate['onDeletePath']('"+path+"') threw an exception: "+e.message)}},readlink:function(path){var lookup=FS.lookupPath(path);var link=lookup.node;if(!link){throw new FS.ErrnoError(44)}if(!link.node_ops.readlink){throw new FS.ErrnoError(28)}return PATH_FS.resolve(FS.getPath(link.parent),link.node_ops.readlink(link))},stat:function(path,dontFollow){var lookup=FS.lookupPath(path,{follow:!dontFollow});var node=lookup.node;if(!node){throw new FS.ErrnoError(44)}if(!node.node_ops.getattr){throw new FS.ErrnoError(63)}return node.node_ops.getattr(node)},lstat:function(path){return FS.stat(path,true)},chmod:function(path,mode,dontFollow){var node;if(typeof path==="string"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{mode:mode&4095|node.mode&~4095,timestamp:Date.now()})},lchmod:function(path,mode){FS.chmod(path,mode,true)},fchmod:function(fd,mode){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}FS.chmod(stream.node,mode)},chown:function(path,uid,gid,dontFollow){var node;if(typeof path==="string"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{timestamp:Date.now()})},lchown:function(path,uid,gid){FS.chown(path,uid,gid,true)},fchown:function(fd,uid,gid){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}FS.chown(stream.node,uid,gid)},truncate:function(path,len){if(len<0){throw new FS.ErrnoError(28)}var node;if(typeof path==="string"){var lookup=FS.lookupPath(path,{follow:true});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}if(FS.isDir(node.mode)){throw new FS.ErrnoError(31)}if(!FS.isFile(node.mode)){throw new FS.ErrnoError(28)}var errCode=FS.nodePermissions(node,"w");if(errCode){throw new FS.ErrnoError(errCode)}node.node_ops.setattr(node,{size:len,timestamp:Date.now()})},ftruncate:function(fd,len){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(28)}FS.truncate(stream.node,len)},utime:function(path,atime,mtime){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;node.node_ops.setattr(node,{timestamp:Math.max(atime,mtime)})},open:function(path,flags,mode,fd_start,fd_end){if(path===""){throw new FS.ErrnoError(44)}flags=typeof flags==="string"?FS.modeStringToFlags(flags):flags;mode=typeof mode==="undefined"?438:mode;if(flags&64){mode=mode&4095|32768}else{mode=0}var node;if(typeof path==="object"){node=path}else{path=PATH.normalize(path);try{var lookup=FS.lookupPath(path,{follow:!(flags&131072)});node=lookup.node}catch(e){}}var created=false;if(flags&64){if(node){if(flags&128){throw new FS.ErrnoError(20)}}else{node=FS.mknod(path,mode,0);created=true}}if(!node){throw new FS.ErrnoError(44)}if(FS.isChrdev(node.mode)){flags&=~512}if(flags&65536&&!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}if(!created){var errCode=FS.mayOpen(node,flags);if(errCode){throw new FS.ErrnoError(errCode)}}if(flags&512){FS.truncate(node,0)}flags&=~(128|512|131072);var stream=FS.createStream({node:node,path:FS.getPath(node),flags:flags,seekable:true,position:0,stream_ops:node.stream_ops,ungotten:[],error:false},fd_start,fd_end);if(stream.stream_ops.open){stream.stream_ops.open(stream)}if(Module["logReadFiles"]&&!(flags&1)){if(!FS.readFiles)FS.readFiles={};if(!(path in FS.readFiles)){FS.readFiles[path]=1;err("FS.trackingDelegate error on read file: "+path)}}try{if(FS.trackingDelegate["onOpenFile"]){var trackingFlags=0;if((flags&2097155)!==1){trackingFlags|=FS.tracking.openFlags.READ}if((flags&2097155)!==0){trackingFlags|=FS.tracking.openFlags.WRITE}FS.trackingDelegate["onOpenFile"](path,trackingFlags)}}catch(e){err("FS.trackingDelegate['onOpenFile']('"+path+"', flags) threw an exception: "+e.message)}return stream},close:function(stream){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(stream.getdents)stream.getdents=null;try{if(stream.stream_ops.close){stream.stream_ops.close(stream)}}catch(e){throw e}finally{FS.closeStream(stream.fd)}stream.fd=null},isClosed:function(stream){return stream.fd===null},llseek:function(stream,offset,whence){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(!stream.seekable||!stream.stream_ops.llseek){throw new FS.ErrnoError(70)}if(whence!=0&&whence!=1&&whence!=2){throw new FS.ErrnoError(28)}stream.position=stream.stream_ops.llseek(stream,offset,whence);stream.ungotten=[];return stream.position},read:function(stream,buffer,offset,length,position){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.read){throw new FS.ErrnoError(28)}var seeking=typeof position!=="undefined";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesRead=stream.stream_ops.read(stream,buffer,offset,length,position);if(!seeking)stream.position+=bytesRead;return bytesRead},write:function(stream,buffer,offset,length,position,canOwn){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.write){throw new FS.ErrnoError(28)}if(stream.seekable&&stream.flags&1024){FS.llseek(stream,0,2)}var seeking=typeof position!=="undefined";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesWritten=stream.stream_ops.write(stream,buffer,offset,length,position,canOwn);if(!seeking)stream.position+=bytesWritten;try{if(stream.path&&FS.trackingDelegate["onWriteToFile"])FS.trackingDelegate["onWriteToFile"](stream.path)}catch(e){err("FS.trackingDelegate['onWriteToFile']('"+stream.path+"') threw an exception: "+e.message)}return bytesWritten},allocate:function(stream,offset,length){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(offset<0||length<=0){throw new FS.ErrnoError(28)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(!FS.isFile(stream.node.mode)&&!FS.isDir(stream.node.mode)){throw new FS.ErrnoError(43)}if(!stream.stream_ops.allocate){throw new FS.ErrnoError(138)}stream.stream_ops.allocate(stream,offset,length)},mmap:function(stream,address,length,position,prot,flags){if((prot&2)!==0&&(flags&2)===0&&(stream.flags&2097155)!==2){throw new FS.ErrnoError(2)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(2)}if(!stream.stream_ops.mmap){throw new FS.ErrnoError(43)}return stream.stream_ops.mmap(stream,address,length,position,prot,flags)},msync:function(stream,buffer,offset,length,mmapFlags){if(!stream||!stream.stream_ops.msync){return 0}return stream.stream_ops.msync(stream,buffer,offset,length,mmapFlags)},munmap:function(stream){return 0},ioctl:function(stream,cmd,arg){if(!stream.stream_ops.ioctl){throw new FS.ErrnoError(59)}return stream.stream_ops.ioctl(stream,cmd,arg)},readFile:function(path,opts){opts=opts||{};opts.flags=opts.flags||0;opts.encoding=opts.encoding||"binary";if(opts.encoding!=="utf8"&&opts.encoding!=="binary"){throw new Error('Invalid encoding type "'+opts.encoding+'"')}var ret;var stream=FS.open(path,opts.flags);var stat=FS.stat(path);var length=stat.size;var buf=new Uint8Array(length);FS.read(stream,buf,0,length,0);if(opts.encoding==="utf8"){ret=UTF8ArrayToString(buf,0)}else if(opts.encoding==="binary"){ret=buf}FS.close(stream);return ret},writeFile:function(path,data,opts){opts=opts||{};opts.flags=opts.flags||577;var stream=FS.open(path,opts.flags,opts.mode);if(typeof data==="string"){var buf=new Uint8Array(lengthBytesUTF8(data)+1);var actualNumBytes=stringToUTF8Array(data,buf,0,buf.length);FS.write(stream,buf,0,actualNumBytes,undefined,opts.canOwn)}else if(ArrayBuffer.isView(data)){FS.write(stream,data,0,data.byteLength,undefined,opts.canOwn)}else{throw new Error("Unsupported data type")}FS.close(stream)},cwd:function(){return FS.currentPath},chdir:function(path){var lookup=FS.lookupPath(path,{follow:true});if(lookup.node===null){throw new FS.ErrnoError(44)}if(!FS.isDir(lookup.node.mode)){throw new FS.ErrnoError(54)}var errCode=FS.nodePermissions(lookup.node,"x");if(errCode){throw new FS.ErrnoError(errCode)}FS.currentPath=lookup.path},createDefaultDirectories:function(){FS.mkdir("/tmp");FS.mkdir("/home");FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev");FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(stream,buffer,offset,length,pos){return length}});FS.mkdev("/dev/null",FS.makedev(1,3));TTY.register(FS.makedev(5,0),TTY.default_tty_ops);TTY.register(FS.makedev(6,0),TTY.default_tty1_ops);FS.mkdev("/dev/tty",FS.makedev(5,0));FS.mkdev("/dev/tty1",FS.makedev(6,0));var random_device=getRandomDevice();FS.createDevice("/dev","random",random_device);FS.createDevice("/dev","urandom",random_device);FS.mkdir("/dev/shm");FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc");var proc_self=FS.mkdir("/proc/self");FS.mkdir("/proc/self/fd");FS.mount({mount:function(){var node=FS.createNode(proc_self,"fd",16384|511,73);node.node_ops={lookup:function(parent,name){var fd=+name;var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);var ret={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return stream.path}}};ret.parent=ret;return ret}};return node}},{},"/proc/self/fd")},createStandardStreams:function(){if(Module["stdin"]){FS.createDevice("/dev","stdin",Module["stdin"])}else{FS.symlink("/dev/tty","/dev/stdin")}if(Module["stdout"]){FS.createDevice("/dev","stdout",null,Module["stdout"])}else{FS.symlink("/dev/tty","/dev/stdout")}if(Module["stderr"]){FS.createDevice("/dev","stderr",null,Module["stderr"])}else{FS.symlink("/dev/tty1","/dev/stderr")}var stdin=FS.open("/dev/stdin",0);var stdout=FS.open("/dev/stdout",1);var stderr=FS.open("/dev/stderr",1)},ensureErrnoError:function(){if(FS.ErrnoError)return;FS.ErrnoError=function ErrnoError(errno,node){this.node=node;this.setErrno=function(errno){this.errno=errno};this.setErrno(errno);this.message="FS error"};FS.ErrnoError.prototype=new Error;FS.ErrnoError.prototype.constructor=FS.ErrnoError;[44].forEach(function(code){FS.genericErrors[code]=new FS.ErrnoError(code);FS.genericErrors[code].stack="<generic error, no stack>"})},staticInit:function(){FS.ensureErrnoError();FS.nameTable=new Array(4096);FS.mount(MEMFS,{},"/");FS.createDefaultDirectories();FS.createDefaultDevices();FS.createSpecialDirectories();FS.filesystems={"MEMFS":MEMFS}},init:function(input,output,error){FS.init.initialized=true;FS.ensureErrnoError();Module["stdin"]=input||Module["stdin"];Module["stdout"]=output||Module["stdout"];Module["stderr"]=error||Module["stderr"];FS.createStandardStreams()},quit:function(){FS.init.initialized=false;var fflush=Module["_fflush"];if(fflush)fflush(0);for(var i=0;i<FS.streams.length;i++){var stream=FS.streams[i];if(!stream){continue}FS.close(stream)}},getMode:function(canRead,canWrite){var mode=0;if(canRead)mode|=292|73;if(canWrite)mode|=146;return mode},findObject:function(path,dontResolveLastLink){var ret=FS.analyzePath(path,dontResolveLastLink);if(ret.exists){return ret.object}else{return null}},analyzePath:function(path,dontResolveLastLink){try{var lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});path=lookup.path}catch(e){}var ret={isRoot:false,exists:false,error:0,name:null,path:null,object:null,parentExists:false,parentPath:null,parentObject:null};try{var lookup=FS.lookupPath(path,{parent:true});ret.parentExists=true;ret.parentPath=lookup.path;ret.parentObject=lookup.node;ret.name=PATH.basename(path);lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});ret.exists=true;ret.path=lookup.path;ret.object=lookup.node;ret.name=lookup.node.name;ret.isRoot=lookup.path==="/"}catch(e){ret.error=e.errno}return ret},createPath:function(parent,path,canRead,canWrite){parent=typeof parent==="string"?parent:FS.getPath(parent);var parts=path.split("/").reverse();while(parts.length){var part=parts.pop();if(!part)continue;var current=PATH.join2(parent,part);try{FS.mkdir(current)}catch(e){}parent=current}return current},createFile:function(parent,name,properties,canRead,canWrite){var path=PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name);var mode=FS.getMode(canRead,canWrite);return FS.create(path,mode)},createDataFile:function(parent,name,data,canRead,canWrite,canOwn){var path=name?PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name):parent;var mode=FS.getMode(canRead,canWrite);var node=FS.create(path,mode);if(data){if(typeof data==="string"){var arr=new Array(data.length);for(var i=0,len=data.length;i<len;++i)arr[i]=data.charCodeAt(i);data=arr}FS.chmod(node,mode|146);var stream=FS.open(node,577);FS.write(stream,data,0,data.length,0,canOwn);FS.close(stream);FS.chmod(node,mode)}return node},createDevice:function(parent,name,input,output){var path=PATH.join2(typeof parent==="string"?parent:FS.getPath(parent),name);var mode=FS.getMode(!!input,!!output);if(!FS.createDevice.major)FS.createDevice.major=64;var dev=FS.makedev(FS.createDevice.major++,0);FS.registerDevice(dev,{open:function(stream){stream.seekable=false},close:function(stream){if(output&&output.buffer&&output.buffer.length){output(10)}},read:function(stream,buffer,offset,length,pos){var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=input()}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write:function(stream,buffer,offset,length,pos){for(var i=0;i<length;i++){try{output(buffer[offset+i])}catch(e){throw new FS.ErrnoError(29)}}if(length){stream.node.timestamp=Date.now()}return i}});return FS.mkdev(path,mode,dev)},forceLoadFile:function(obj){if(obj.isDevice||obj.isFolder||obj.link||obj.contents)return true;if(typeof XMLHttpRequest!=="undefined"){throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.")}else if(read_){try{obj.contents=intArrayFromString(read_(obj.url),true);obj.usedBytes=obj.contents.length}catch(e){throw new FS.ErrnoError(29)}}else{throw new Error("Cannot load without read() or XMLHttpRequest.")}},createLazyFile:function(parent,name,url,canRead,canWrite){function LazyUint8Array(){this.lengthKnown=false;this.chunks=[]}LazyUint8Array.prototype.get=function LazyUint8Array_get(idx){if(idx>this.length-1||idx<0){return undefined}var chunkOffset=idx%this.chunkSize;var chunkNum=idx/this.chunkSize|0;return this.getter(chunkNum)[chunkOffset]};LazyUint8Array.prototype.setDataGetter=function LazyUint8Array_setDataGetter(getter){this.getter=getter};LazyUint8Array.prototype.cacheLength=function LazyUint8Array_cacheLength(){var xhr=new XMLHttpRequest;xhr.open("HEAD",url,false);xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error("Couldn't load "+url+". Status: "+xhr.status);var datalength=Number(xhr.getResponseHeader("Content-length"));var header;var hasByteServing=(header=xhr.getResponseHeader("Accept-Ranges"))&&header==="bytes";var usesGzip=(header=xhr.getResponseHeader("Content-Encoding"))&&header==="gzip";var chunkSize=1024*1024;if(!hasByteServing)chunkSize=datalength;var doXHR=function(from,to){if(from>to)throw new Error("invalid range ("+from+", "+to+") or no bytes requested!");if(to>datalength-1)throw new Error("only "+datalength+" bytes available! programmer error!");var xhr=new XMLHttpRequest;xhr.open("GET",url,false);if(datalength!==chunkSize)xhr.setRequestHeader("Range","bytes="+from+"-"+to);if(typeof Uint8Array!="undefined")xhr.responseType="arraybuffer";if(xhr.overrideMimeType){xhr.overrideMimeType("text/plain; charset=x-user-defined")}xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error("Couldn't load "+url+". Status: "+xhr.status);if(xhr.response!==undefined){return new Uint8Array(xhr.response||[])}else{return intArrayFromString(xhr.responseText||"",true)}};var lazyArray=this;lazyArray.setDataGetter(function(chunkNum){var start=chunkNum*chunkSize;var end=(chunkNum+1)*chunkSize-1;end=Math.min(end,datalength-1);if(typeof lazyArray.chunks[chunkNum]==="undefined"){lazyArray.chunks[chunkNum]=doXHR(start,end)}if(typeof lazyArray.chunks[chunkNum]==="undefined")throw new Error("doXHR failed!");return lazyArray.chunks[chunkNum]});if(usesGzip||!datalength){chunkSize=datalength=1;datalength=this.getter(0).length;chunkSize=datalength;out("LazyFiles on gzip forces download of the whole file when length is accessed")}this._length=datalength;this._chunkSize=chunkSize;this.lengthKnown=true};if(typeof XMLHttpRequest!=="undefined"){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var lazyArray=new LazyUint8Array;Object.defineProperties(lazyArray,{length:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._length}},chunkSize:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._chunkSize}}});var properties={isDevice:false,contents:lazyArray}}else{var properties={isDevice:false,url:url}}var node=FS.createFile(parent,name,properties,canRead,canWrite);if(properties.contents){node.contents=properties.contents}else if(properties.url){node.contents=null;node.url=properties.url}Object.defineProperties(node,{usedBytes:{get:function(){return this.contents.length}}});var stream_ops={};var keys=Object.keys(node.stream_ops);keys.forEach(function(key){var fn=node.stream_ops[key];stream_ops[key]=function forceLoadLazyFile(){FS.forceLoadFile(node);return fn.apply(null,arguments)}});stream_ops.read=function stream_ops_read(stream,buffer,offset,length,position){FS.forceLoadFile(node);var contents=stream.node.contents;if(position>=contents.length)return 0;var size=Math.min(contents.length-position,length);if(contents.slice){for(var i=0;i<size;i++){buffer[offset+i]=contents[position+i]}}else{for(var i=0;i<size;i++){buffer[offset+i]=contents.get(position+i)}}return size};node.stream_ops=stream_ops;return node},createPreloadedFile:function(parent,name,url,canRead,canWrite,onload,onerror,dontCreateFile,canOwn,preFinish){Browser.init();var fullname=name?PATH_FS.resolve(PATH.join2(parent,name)):parent;var dep=getUniqueRunDependency("cp "+fullname);function processData(byteArray){function finish(byteArray){if(preFinish)preFinish();if(!dontCreateFile){FS.createDataFile(parent,name,byteArray,canRead,canWrite,canOwn)}if(onload)onload();removeRunDependency(dep)}var handled=false;Module["preloadPlugins"].forEach(function(plugin){if(handled)return;if(plugin["canHandle"](fullname)){plugin["handle"](byteArray,fullname,finish,function(){if(onerror)onerror();removeRunDependency(dep)});handled=true}});if(!handled)finish(byteArray)}addRunDependency(dep);if(typeof url=="string"){Browser.asyncLoad(url,function(byteArray){processData(byteArray)},onerror)}else{processData(url)}},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(paths,onload,onerror){onload=onload||function(){};onerror=onerror||function(){};var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=function openRequest_onupgradeneeded(){out("creating db");var db=openRequest.result;db.createObjectStore(FS.DB_STORE_NAME)};openRequest.onsuccess=function openRequest_onsuccess(){var db=openRequest.result;var transaction=db.transaction([FS.DB_STORE_NAME],"readwrite");var files=transaction.objectStore(FS.DB_STORE_NAME);var ok=0,fail=0,total=paths.length;function finish(){if(fail==0)onload();else onerror()}paths.forEach(function(path){var putRequest=files.put(FS.analyzePath(path).object.contents,path);putRequest.onsuccess=function putRequest_onsuccess(){ok++;if(ok+fail==total)finish()};putRequest.onerror=function putRequest_onerror(){fail++;if(ok+fail==total)finish()}});transaction.onerror=onerror};openRequest.onerror=onerror},loadFilesFromDB:function(paths,onload,onerror){onload=onload||function(){};onerror=onerror||function(){};var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=onerror;openRequest.onsuccess=function openRequest_onsuccess(){var db=openRequest.result;try{var transaction=db.transaction([FS.DB_STORE_NAME],"readonly")}catch(e){onerror(e);return}var files=transaction.objectStore(FS.DB_STORE_NAME);var ok=0,fail=0,total=paths.length;function finish(){if(fail==0)onload();else onerror()}paths.forEach(function(path){var getRequest=files.get(path);getRequest.onsuccess=function getRequest_onsuccess(){if(FS.analyzePath(path).exists){FS.unlink(path)}FS.createDataFile(PATH.dirname(path),PATH.basename(path),getRequest.result,true,true,true);ok++;if(ok+fail==total)finish()};getRequest.onerror=function getRequest_onerror(){fail++;if(ok+fail==total)finish()}});transaction.onerror=onerror};openRequest.onerror=onerror}};var SYSCALLS={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(dirfd,path,allowEmpty){if(path[0]==="/"){return path}var dir;if(dirfd===-100){dir=FS.cwd()}else{var dirstream=FS.getStream(dirfd);if(!dirstream)throw new FS.ErrnoError(8);dir=dirstream.path}if(path.length==0){if(!allowEmpty){throw new FS.ErrnoError(44)}return dir}return PATH.join2(dir,path)},doStat:function(func,path,buf){try{var stat=func(path)}catch(e){if(e&&e.node&&PATH.normalize(path)!==PATH.normalize(FS.getPath(e.node))){return-54}throw e}HEAP32[buf>>2]=stat.dev;HEAP32[buf+4>>2]=0;HEAP32[buf+8>>2]=stat.ino;HEAP32[buf+12>>2]=stat.mode;HEAP32[buf+16>>2]=stat.nlink;HEAP32[buf+20>>2]=stat.uid;HEAP32[buf+24>>2]=stat.gid;HEAP32[buf+28>>2]=stat.rdev;HEAP32[buf+32>>2]=0;tempI64=[stat.size>>>0,(tempDouble=stat.size,+Math.abs(tempDouble)>=1?tempDouble>0?(Math.min(+Math.floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[buf+40>>2]=tempI64[0],HEAP32[buf+44>>2]=tempI64[1];HEAP32[buf+48>>2]=4096;HEAP32[buf+52>>2]=stat.blocks;HEAP32[buf+56>>2]=stat.atime.getTime()/1e3|0;HEAP32[buf+60>>2]=0;HEAP32[buf+64>>2]=stat.mtime.getTime()/1e3|0;HEAP32[buf+68>>2]=0;HEAP32[buf+72>>2]=stat.ctime.getTime()/1e3|0;HEAP32[buf+76>>2]=0;tempI64=[stat.ino>>>0,(tempDouble=stat.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(Math.min(+Math.floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[buf+80>>2]=tempI64[0],HEAP32[buf+84>>2]=tempI64[1];return 0},doMsync:function(addr,stream,len,flags,offset){var buffer=HEAPU8.slice(addr,addr+len);FS.msync(stream,buffer,offset,len,flags)},doMkdir:function(path,mode){path=PATH.normalize(path);if(path[path.length-1]==="/")path=path.substr(0,path.length-1);FS.mkdir(path,mode,0);return 0},doMknod:function(path,mode,dev){switch(mode&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}FS.mknod(path,mode,dev);return 0},doReadlink:function(path,buf,bufsize){if(bufsize<=0)return-28;var ret=FS.readlink(path);var len=Math.min(bufsize,lengthBytesUTF8(ret));var endChar=HEAP8[buf+len];stringToUTF8(ret,buf,bufsize+1);HEAP8[buf+len]=endChar;return len},doAccess:function(path,amode){if(amode&~7){return-28}var node;var lookup=FS.lookupPath(path,{follow:true});node=lookup.node;if(!node){return-44}var perms="";if(amode&4)perms+="r";if(amode&2)perms+="w";if(amode&1)perms+="x";if(perms&&FS.nodePermissions(node,perms)){return-2}return 0},doDup:function(path,flags,suggestFD){var suggest=FS.getStream(suggestFD);if(suggest)FS.close(suggest);return FS.open(path,flags,0,suggestFD,suggestFD).fd},doReadv:function(stream,iov,iovcnt,offset){var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];var curr=FS.read(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr;if(curr<len)break}return ret},doWritev:function(stream,iov,iovcnt,offset){var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];var curr=FS.write(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr}return ret},varargs:undefined,get:function(){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(ptr){var ret=UTF8ToString(ptr);return ret},getStreamFromFD:function(fd){var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);return stream},get64:function(low,high){return low}};function ___sys_fcntl64(fd,cmd,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(cmd){case 0:{var arg=SYSCALLS.get();if(arg<0){return-28}var newStream;newStream=FS.open(stream.path,stream.flags,0,arg);return newStream.fd}case 1:case 2:return 0;case 3:return stream.flags;case 4:{var arg=SYSCALLS.get();stream.flags|=arg;return 0}case 12:{var arg=SYSCALLS.get();var offset=0;HEAP16[arg+offset>>1]=2;return 0}case 13:case 14:return 0;case 16:case 8:return-28;case 9:setErrNo(28);return-1;default:{return-28}}}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_ioctl(fd,op,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(op){case 21509:case 21505:{if(!stream.tty)return-59;return 0}case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:{if(!stream.tty)return-59;return 0}case 21519:{if(!stream.tty)return-59;var argp=SYSCALLS.get();HEAP32[argp>>2]=0;return 0}case 21520:{if(!stream.tty)return-59;return-28}case 21531:{var argp=SYSCALLS.get();return FS.ioctl(stream,op,argp)}case 21523:{if(!stream.tty)return-59;return 0}case 21524:{if(!stream.tty)return-59;return 0}default:abort("bad ioctl syscall "+op)}}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___sys_open(path,flags,varargs){SYSCALLS.varargs=varargs;try{var pathname=SYSCALLS.getStr(path);var mode=varargs?SYSCALLS.get():0;var stream=FS.open(pathname,flags,mode);return stream.fd}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function _emscripten_memcpy_big(dest,src,num){HEAPU8.copyWithin(dest,src,src+num)}function abortOnCannotGrowMemory(requestedSize){abort("OOM")}function _emscripten_resize_heap(requestedSize){abortOnCannotGrowMemory(requestedSize)}function _fd_close(fd){try{var stream=SYSCALLS.getStreamFromFD(fd);FS.close(stream);return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_read(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=SYSCALLS.doReadv(stream,iov,iovcnt);HEAP32[pnum>>2]=num;return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){try{var stream=SYSCALLS.getStreamFromFD(fd);var HIGH_OFFSET=4294967296;var offset=offset_high*HIGH_OFFSET+(offset_low>>>0);var DOUBLE_LIMIT=9007199254740992;if(offset<=-DOUBLE_LIMIT||offset>=DOUBLE_LIMIT){return-61}FS.llseek(stream,offset,whence);tempI64=[stream.position>>>0,(tempDouble=stream.position,+Math.abs(tempDouble)>=1?tempDouble>0?(Math.min(+Math.floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[newOffset>>2]=tempI64[0],HEAP32[newOffset+4>>2]=tempI64[1];if(stream.getdents&&offset===0&&whence===0)stream.getdents=null;return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_write(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=SYSCALLS.doWritev(stream,iov,iovcnt);HEAP32[pnum>>2]=num;return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function runAndAbortIfError(func){try{return func()}catch(e){abort(e)}}var Asyncify={State:{Normal:0,Unwinding:1,Rewinding:2},state:0,StackSize:4096,currData:null,handleSleepReturnValue:0,exportCallStack:[],callStackNameToId:{},callStackIdToName:{},callStackId:0,afterUnwind:null,asyncFinalizers:[],sleepCallbacks:[],getCallStackId:function(funcName){var id=Asyncify.callStackNameToId[funcName];if(id===undefined){id=Asyncify.callStackId++;Asyncify.callStackNameToId[funcName]=id;Asyncify.callStackIdToName[id]=funcName}return id},instrumentWasmExports:function(exports){var ret={};for(var x in exports){(function(x){var original=exports[x];if(typeof original==="function"){ret[x]=function(){Asyncify.exportCallStack.push(x);try{return original.apply(null,arguments)}finally{if(ABORT)return;var y=Asyncify.exportCallStack.pop();assert(y===x);Asyncify.maybeStopUnwind()}}}else{ret[x]=original}})(x)}return ret},maybeStopUnwind:function(){if(Asyncify.currData&&Asyncify.state===Asyncify.State.Unwinding&&Asyncify.exportCallStack.length===0){Asyncify.state=Asyncify.State.Normal;runAndAbortIfError(Module["_asyncify_stop_unwind"]);if(typeof Fibers!=="undefined"){Fibers.trampoline()}if(Asyncify.afterUnwind){Asyncify.afterUnwind();Asyncify.afterUnwind=null}}},allocateData:function(){var ptr=_malloc(12+Asyncify.StackSize);Asyncify.setDataHeader(ptr,ptr+12,Asyncify.StackSize);Asyncify.setDataRewindFunc(ptr);return ptr},setDataHeader:function(ptr,stack,stackSize){HEAP32[ptr>>2]=stack;HEAP32[ptr+4>>2]=stack+stackSize},setDataRewindFunc:function(ptr){var bottomOfCallStack=Asyncify.exportCallStack[0];var rewindId=Asyncify.getCallStackId(bottomOfCallStack);HEAP32[ptr+8>>2]=rewindId},getDataRewindFunc:function(ptr){var id=HEAP32[ptr+8>>2];var name=Asyncify.callStackIdToName[id];var func=Module["asm"][name];return func},handleSleep:function(startAsync){if(ABORT)return;noExitRuntime=true;if(Asyncify.state===Asyncify.State.Normal){var reachedCallback=false;var reachedAfterCallback=false;startAsync(function(handleSleepReturnValue){if(ABORT)return;Asyncify.handleSleepReturnValue=handleSleepReturnValue||0;reachedCallback=true;if(!reachedAfterCallback){return}Asyncify.state=Asyncify.State.Rewinding;runAndAbortIfError(function(){Module["_asyncify_start_rewind"](Asyncify.currData)});if(typeof Browser!=="undefined"&&Browser.mainLoop.func){Browser.mainLoop.resume()}var start=Asyncify.getDataRewindFunc(Asyncify.currData);var asyncWasmReturnValue=start();if(!Asyncify.currData){var asyncFinalizers=Asyncify.asyncFinalizers;Asyncify.asyncFinalizers=[];asyncFinalizers.forEach(function(func){func(asyncWasmReturnValue)})}});reachedAfterCallback=true;if(!reachedCallback){Asyncify.state=Asyncify.State.Unwinding;Asyncify.currData=Asyncify.allocateData();runAndAbortIfError(function(){Module["_asyncify_start_unwind"](Asyncify.currData)});if(typeof Browser!=="undefined"&&Browser.mainLoop.func){Browser.mainLoop.pause()}}}else if(Asyncify.state===Asyncify.State.Rewinding){Asyncify.state=Asyncify.State.Normal;runAndAbortIfError(Module["_asyncify_stop_rewind"]);_free(Asyncify.currData);Asyncify.currData=null;Asyncify.sleepCallbacks.forEach(function(func){func()})}else{abort("invalid state: "+Asyncify.state)}return Asyncify.handleSleepReturnValue},handleAsync:function(startAsync){return Asyncify.handleSleep(function(wakeUp){startAsync().then(wakeUp)})}};var FSNode=function(parent,name,mode,rdev){if(!parent){parent=this}this.parent=parent;this.mount=parent.mount;this.mounted=null;this.id=FS.nextInode++;this.name=name;this.mode=mode;this.node_ops={};this.stream_ops={};this.rdev=rdev};var readMode=292|73;var writeMode=146;Object.defineProperties(FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(val){val?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(val){val?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}});FS.FSNode=FSNode;FS.staticInit();var ASSERTIONS=false;function intArrayFromString(stringy,dontAddNull,length){var len=length>0?length:lengthBytesUTF8(stringy)+1;var u8array=new Array(len);var numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);if(dontAddNull)u8array.length=numBytesWritten;return u8array}function intArrayToString(array){var ret=[];for(var i=0;i<array.length;i++){var chr=array[i];if(chr>255){if(ASSERTIONS){assert(false,"Character code "+chr+" ("+String.fromCharCode(chr)+")  at offset "+i+" not in 0x00-0xFF.")}chr&=255}ret.push(String.fromCharCode(chr))}return ret.join("")}var decodeBase64=typeof atob==="function"?atob:function(input){var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{enc1=keyStr.indexOf(input.charAt(i++));enc2=keyStr.indexOf(input.charAt(i++));enc3=keyStr.indexOf(input.charAt(i++));enc4=keyStr.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!==64){output=output+String.fromCharCode(chr2)}if(enc4!==64){output=output+String.fromCharCode(chr3)}}while(i<input.length);return output};function intArrayFromBase64(s){if(typeof ENVIRONMENT_IS_NODE==="boolean"&&ENVIRONMENT_IS_NODE){var buf;try{buf=Buffer.from(s,"base64")}catch(_){buf=new Buffer(s,"base64")}return new Uint8Array(buf["buffer"],buf["byteOffset"],buf["byteLength"])}try{var decoded=decodeBase64(s);var bytes=new Uint8Array(decoded.length);for(var i=0;i<decoded.length;++i){bytes[i]=decoded.charCodeAt(i)}return bytes}catch(_){throw new Error("Converting base64 string to bytes failed.")}}function tryParseAsDataURI(filename){if(!isDataURI(filename)){return}return intArrayFromBase64(filename.slice(dataURIPrefix.length))}var asmLibraryArg={"j":WebHidCloseConnection,"n":WebHidOpenConnection,"o":WebHidProgressUpdate,"i":WebHidReadData,"h":WebHidWriteData,"b":___sys_fcntl64,"f":___sys_ioctl,"g":___sys_open,"l":_emscripten_memcpy_big,"m":_emscripten_resize_heap,"c":_fd_close,"e":_fd_read,"k":_fd_seek,"d":_fd_write,"a":wasmMemory};var asm=createWasm();var ___wasm_call_ctors=Module["___wasm_call_ctors"]=function(){return(___wasm_call_ctors=Module["___wasm_call_ctors"]=Module["asm"]["p"]).apply(null,arguments)};var _Cybootloader_WebHidProgram=Module["_Cybootloader_WebHidProgram"]=function(){return(_Cybootloader_WebHidProgram=Module["_Cybootloader_WebHidProgram"]=Module["asm"]["q"]).apply(null,arguments)};var _Cybootloader_WebHidVerify=Module["_Cybootloader_WebHidVerify"]=function(){return(_Cybootloader_WebHidVerify=Module["_Cybootloader_WebHidVerify"]=Module["asm"]["r"]).apply(null,arguments)};var _Cybootloader_WebHidErase=Module["_Cybootloader_WebHidErase"]=function(){return(_Cybootloader_WebHidErase=Module["_Cybootloader_WebHidErase"]=Module["asm"]["s"]).apply(null,arguments)};var ___errno_location=Module["___errno_location"]=function(){return(___errno_location=Module["___errno_location"]=Module["asm"]["u"]).apply(null,arguments)};var _free=Module["_free"]=function(){return(_free=Module["_free"]=Module["asm"]["v"]).apply(null,arguments)};var _malloc=Module["_malloc"]=function(){return(_malloc=Module["_malloc"]=Module["asm"]["w"]).apply(null,arguments)};var stackSave=Module["stackSave"]=function(){return(stackSave=Module["stackSave"]=Module["asm"]["x"]).apply(null,arguments)};var stackRestore=Module["stackRestore"]=function(){return(stackRestore=Module["stackRestore"]=Module["asm"]["y"]).apply(null,arguments)};var stackAlloc=Module["stackAlloc"]=function(){return(stackAlloc=Module["stackAlloc"]=Module["asm"]["z"]).apply(null,arguments)};var _asyncify_start_unwind=Module["_asyncify_start_unwind"]=function(){return(_asyncify_start_unwind=Module["_asyncify_start_unwind"]=Module["asm"]["A"]).apply(null,arguments)};var _asyncify_stop_unwind=Module["_asyncify_stop_unwind"]=function(){return(_asyncify_stop_unwind=Module["_asyncify_stop_unwind"]=Module["asm"]["B"]).apply(null,arguments)};var _asyncify_start_rewind=Module["_asyncify_start_rewind"]=function(){return(_asyncify_start_rewind=Module["_asyncify_start_rewind"]=Module["asm"]["C"]).apply(null,arguments)};var _asyncify_stop_rewind=Module["_asyncify_stop_rewind"]=function(){return(_asyncify_stop_rewind=Module["_asyncify_stop_rewind"]=Module["asm"]["D"]).apply(null,arguments)};Module["ccall"]=ccall;var calledRun;function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status}dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module["calledRun"]=true;if(ABORT)return;initRuntime();preMain();if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();postRun()}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("")},1);doRun()},1)}else{doRun()}}Module["run"]=run;if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()()}}run();class BootloadableDevice{setDevice(device){this.device=device;if(this.device!==undefined){let self=this;this.device.addEventListener("inputreport",report=>self.saveResponse(new Uint8Array(report.data.buffer)));this._message(`Selected device "${this.device.productName}"`)}}async findDevice(deviceFilter){let devices=await navigator.hid.requestDevice({filters:[deviceFilter]});if(devices.length===0)return false;this.setDevice(devices[0]);return true}hasDevice(){return this.device!==undefined}async loadFile(blob){let view=new Uint8Array(await blob.arrayBuffer());FS.writeFile(this.filename,view)}async program(){return await this._action("Program")}async verify(){return await this._action("Verify")}async erase(){return await this._action("Erase")}addMessageCallback(callback){this.messageCallbacks.push(callback)}constructor(){this.device=undefined;this.filename="/tmp/file";this.messageCallbacks=[console.log]}_message(text){for(let callback of this.messageCallbacks)callback(text)}async _action(name){let code=await Module.ccall("Cybootloader_WebHid"+name,"number",["string"],[this.filename],{"async":true});if(code==0)this._message(`${name} successful, done`);else this._message(`${name} error: return code ${code}`);return code}async _open(){if(!this.hasDevice())throw Error("No HID device is currently selected");if(!this.device.opened){await this.device.open();this._message(`Opened device "${this.device.productName}"`)}this.rxCount=this.txCount=0}async _close(){await this.device.close();this._message(`Closed device "${this.device.productName}"`)}async _read(){++this.rxCount;assert(this.rxCount==this.txCount);return await this.readResponse}async _write(buf){++this.txCount;this.readResponse=new Promise(resolve=>this.saveResponse=resolve);await this.device.sendReport(0,buf)}}let bootloadable=new BootloadableDevice;Module.activeDevice=bootloadable;module.exports=bootloadable;
